{
  "version": 3,
  "sources": ["../../node_modules/thirdweb/src/react/web/wallets/shared/GuestLogin.tsx", "../../node_modules/thirdweb/src/react/web/wallets/shared/OTPLoginUI.tsx", "../../node_modules/thirdweb/src/react/web/ui/components/FadeIn.tsx", "../../node_modules/input-otp/src/input.tsx", "../../node_modules/input-otp/src/sync-timeouts.ts", "../../node_modules/input-otp/src/use-previous.ts", "../../node_modules/input-otp/src/use-pwm-badge.tsx", "../../node_modules/input-otp/src/regexp.ts", "../../node_modules/thirdweb/src/react/web/ui/components/OTPInput.tsx", "../../node_modules/thirdweb/src/react/web/wallets/shared/PassKeyLogin.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/icons/AccentFailIcon.tsx", "../../node_modules/thirdweb/src/react/web/wallets/shared/ErrorState.tsx", "../../node_modules/thirdweb/src/react/web/wallets/shared/LoadingState.tsx", "../../node_modules/thirdweb/src/react/web/wallets/shared/SocialLogin.tsx", "../../node_modules/thirdweb/src/react/web/wallets/in-app/WalletAuth.tsx", "../../node_modules/thirdweb/src/react/core/hooks/wallets/useAddConnectedWallet.ts", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/WalletSelector.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/Modal/SmartWalletConnectUI.tsx", "../../node_modules/thirdweb/src/react/web/wallets/smartWallet/locale/getSmartWalletLocale.ts", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/Modal/AnyWalletConnectUI.tsx", "../../node_modules/thirdweb/src/react/web/wallets/injected/locale/getInjectedWalletLocale.ts", "../../node_modules/thirdweb/src/react/web/wallets/shared/GetStartedScreen.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/icons/AppleIcon.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/icons/ChromeIcon.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/icons/PlayStoreIcon.tsx", "../../node_modules/thirdweb/src/react/web/ui/components/QRCode.tsx", "../../node_modules/thirdweb/src/react/web/wallets/shared/WalletConnectConnection.tsx", "../../node_modules/thirdweb/src/utils/promise/wait.ts", "../../node_modules/thirdweb/src/react/web/wallets/shared/ScanScreen.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/Modal/DeepLinkConnectUI.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/Modal/InjectedConnectUI.tsx", "../../node_modules/thirdweb/src/react/core/utils/wait.ts", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/Modal/TOS.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/icons/ThirdwebTextIcon.tsx", "../../node_modules/thirdweb/src/react/web/ui/ConnectWallet/PoweredByTW.tsx", "../../node_modules/thirdweb/src/react/web/wallets/defaultWallets.ts"],
  "sourcesContent": ["\"use client\";\nimport { useEffect, useRef, useState } from \"react\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { webLocalStorage } from \"../../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport { setLastAuthProvider } from \"../../../core/utils/storage.js\";\nimport type { ConnectLocale } from \"../../ui/ConnectWallet/locale/types.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { Spinner } from \"../../ui/components/Spinner.js\";\nimport { Container, ModalHeader } from \"../../ui/components/basic.js\";\nimport { Button } from \"../../ui/components/buttons.js\";\nimport { Text } from \"../../ui/components/text.js\";\nimport type { ConnectWalletSelectUIState } from \"./ConnectWalletSocialOptions.js\";\nimport type { InAppWalletLocale } from \"./locale/types.js\";\n\n/**\n * @internal\n */\nexport function GuestLogin(props: {\n  locale: InAppWalletLocale;\n  wallet: Wallet;\n  done: () => void;\n  goBack?: () => void;\n  state: ConnectWalletSelectUIState;\n  size: \"compact\" | \"wide\";\n  client: ThirdwebClient;\n  connectLocale: ConnectLocale;\n}) {\n  const ewLocale = props.locale;\n  const locale = ewLocale.socialLoginScreen;\n\n  const [authError, setAuthError] = useState<string | undefined>(undefined);\n  const { done, wallet } = props;\n  const [status, setStatus] = useState<\"connecting\" | \"connected\" | \"error\">(\n    \"connecting\",\n  );\n\n  const handleGuestLogin = async () => {\n    const connectOptions = {\n      client: props.client,\n      ecosystem: isEcosystemWallet(wallet)\n        ? {\n            id: wallet.id,\n            partnerId: wallet.getConfig()?.partnerId,\n          }\n        : undefined,\n      strategy: \"guest\" as const,\n    };\n    try {\n      await wallet.connect(connectOptions);\n      await setLastAuthProvider(\"guest\", webLocalStorage);\n\n      setStatus(\"connected\");\n      done();\n    } catch (e) {\n      setStatus(\"error\");\n      // TODO this only happens on 'retry' button click, not on initial login\n      // should pass auth error message to this component\n      if (\n        e instanceof Error &&\n        e?.message?.includes(\"PAYMENT_METHOD_REQUIRED\")\n      ) {\n        setAuthError(ewLocale.maxAccountsExceeded);\n      }\n      console.error(\"Error generating guest account\", e);\n    }\n  };\n\n  const guestLogin = props.state?.guestLogin;\n\n  const socialLoginStarted = useRef(false);\n  useEffect(() => {\n    if (socialLoginStarted.current) {\n      return;\n    }\n\n    if (guestLogin) {\n      socialLoginStarted.current = true;\n      setStatus(\"connecting\");\n      guestLogin.connectionPromise\n        .then(() => {\n          done();\n          setStatus(\"connected\");\n        })\n        .catch((e) => {\n          setAuthError(e.message);\n          setStatus(\"error\");\n        });\n    }\n  }, [done, guestLogin]);\n\n  return (\n    <Container animate=\"fadein\" flex=\"column\" fullHeight>\n      <Container\n        flex=\"column\"\n        expand\n        p=\"lg\"\n        style={{\n          paddingBottom: 0,\n        }}\n      >\n        {props.goBack && (\n          <ModalHeader title={locale.title} onBack={props.goBack} />\n        )}\n\n        {props.size === \"compact\" ? <Spacer y=\"xl\" /> : null}\n\n        <Container\n          flex=\"column\"\n          center=\"both\"\n          expand\n          style={{\n            textAlign: \"center\",\n            minHeight: \"250px\",\n          }}\n        >\n          {status !== \"error\" && (\n            <Container animate=\"fadein\">\n              <Text\n                color=\"primaryText\"\n                center\n                multiline\n                style={{\n                  maxWidth: \"250px\",\n                }}\n              >\n                Generating your guest account\n              </Text>\n              <Spacer y=\"xl\" />\n              <Container center=\"x\" flex=\"row\">\n                <Spinner size=\"lg\" color=\"accentText\" />\n              </Container>\n\n              <Spacer y=\"xxl\" />\n            </Container>\n          )}\n\n          {status === \"error\" && (\n            <Container animate=\"fadein\">\n              {authError ? (\n                <Text center color=\"danger\">\n                  {authError}\n                </Text>\n              ) : (\n                <Text color=\"danger\">{locale.failed}</Text>\n              )}\n              <Spacer y=\"lg\" />\n              <Button variant=\"primary\" onClick={handleGuestLogin}>\n                {locale.retry}\n              </Button>\n              <Spacer y=\"xxl\" />\n            </Container>\n          )}\n        </Container>\n      </Container>\n    </Container>\n  );\n}\n", "\"use client\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { webLocalStorage } from \"../../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport {\n  linkProfile,\n  preAuthenticate,\n} from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport { fontSize } from \"../../../core/design-system/index.js\";\nimport { setLastAuthProvider } from \"../../../core/utils/storage.js\";\nimport { FadeIn } from \"../../ui/components/FadeIn.js\";\nimport { OTPInput } from \"../../ui/components/OTPInput.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { Spinner } from \"../../ui/components/Spinner.js\";\nimport { Container, Line, ModalHeader } from \"../../ui/components/basic.js\";\nimport { Button } from \"../../ui/components/buttons.js\";\nimport { Text } from \"../../ui/components/text.js\";\nimport { StyledButton } from \"../../ui/design-system/elements.js\";\nimport type { InAppWalletLocale } from \"./locale/types.js\";\n\ntype VerificationStatus =\n  | \"verifying\"\n  | \"invalid\"\n  | \"linking_error\"\n  | \"valid\"\n  | \"idle\"\n  | \"payment_required\";\ntype AccountStatus = \"sending\" | \"sent\" | \"error\";\ntype ScreenToShow = \"base\" | \"enter-password-or-recovery-code\";\n\n/**\n * @internal\n */\nexport function OTPLoginUI(props: {\n  userInfo: { email: string } | { phone: string };\n  wallet: Wallet;\n  locale: InAppWalletLocale;\n  done: () => void;\n  goBack?: () => void;\n  client: ThirdwebClient;\n  chain: Chain | undefined;\n  size: \"compact\" | \"wide\";\n  isLinking?: boolean;\n}) {\n  const { wallet, done, goBack, userInfo } = props;\n  const isWideModal = props.size === \"wide\";\n  const locale = props.locale;\n  const [otpInput, setOtpInput] = useState(\"\");\n  const [verifyStatus, setVerifyStatus] = useState<VerificationStatus>(\"idle\");\n  const [error, setError] = useState<string | undefined>();\n  const [accountStatus, setAccountStatus] = useState<AccountStatus>(\"sending\");\n  const ecosystem = isEcosystemWallet(wallet)\n    ? {\n        id: wallet.id,\n        partnerId: wallet.getConfig()?.partnerId,\n      }\n    : undefined;\n\n  const [screen] = useState<ScreenToShow>(\"base\");\n\n  const sendEmailOrSms = useCallback(async () => {\n    setOtpInput(\"\");\n    setVerifyStatus(\"idle\");\n    setAccountStatus(\"sending\");\n\n    try {\n      if (\"email\" in userInfo) {\n        await preAuthenticate({\n          ecosystem,\n          email: userInfo.email,\n          strategy: \"email\",\n          client: props.client,\n        });\n        setAccountStatus(\"sent\");\n      } else if (\"phone\" in userInfo) {\n        await preAuthenticate({\n          ecosystem,\n          phoneNumber: userInfo.phone,\n          strategy: \"phone\",\n          client: props.client,\n        });\n        setAccountStatus(\"sent\");\n      } else {\n        throw new Error(\"Invalid userInfo\");\n      }\n    } catch (e) {\n      console.error(e);\n      setVerifyStatus(\"idle\");\n      setAccountStatus(\"error\");\n    }\n  }, [props.client, userInfo, ecosystem]);\n\n  async function connect(otp: string) {\n    if (\"email\" in userInfo) {\n      await wallet.connect({\n        chain: props.chain,\n        strategy: \"email\",\n        email: userInfo.email,\n        verificationCode: otp,\n        client: props.client,\n      });\n      await setLastAuthProvider(\"email\", webLocalStorage);\n    } else if (\"phone\" in userInfo) {\n      await wallet.connect({\n        chain: props.chain,\n        strategy: \"phone\",\n        phoneNumber: userInfo.phone,\n        verificationCode: otp,\n        client: props.client,\n      });\n      await setLastAuthProvider(\"phone\", webLocalStorage);\n    } else {\n      throw new Error(\"Invalid userInfo\");\n    }\n  }\n\n  async function link(otp: string) {\n    if (\"email\" in userInfo) {\n      await linkProfile({\n        client: props.client,\n        strategy: \"email\",\n        email: userInfo.email,\n        verificationCode: otp,\n        ecosystem,\n      });\n    } else if (\"phone\" in userInfo) {\n      await linkProfile({\n        client: props.client,\n        strategy: \"phone\",\n        phoneNumber: userInfo.phone,\n        verificationCode: otp,\n        ecosystem,\n      });\n    }\n  }\n\n  const verify = async (otp: string) => {\n    if (otp.length !== 6) {\n      return;\n    }\n    setVerifyStatus(\"verifying\");\n\n    try {\n      // verifies otp for UI feedback\n      if (props.isLinking) {\n        await link(otp);\n      } else {\n        await connect(otp);\n      }\n      done();\n\n      setVerifyStatus(\"valid\");\n    } catch (e) {\n      // TODO: More robust error handling\n      if (\n        e instanceof Error &&\n        e?.message?.includes(\"PAYMENT_METHOD_REQUIRED\")\n      ) {\n        setVerifyStatus(\"payment_required\");\n      } else if (\n        e instanceof Error &&\n        (e.message.toLowerCase().includes(\"link\") ||\n          e.message.toLowerCase().includes(\"profile\"))\n      ) {\n        setVerifyStatus(\"linking_error\");\n        setError(e.message);\n      } else {\n        setVerifyStatus(\"invalid\");\n      }\n      console.error(\"Authentication Error\", e);\n    }\n  };\n\n  // send email on mount\n  const emailSentOnMount = useRef(false);\n  useEffect(() => {\n    if (!emailSentOnMount.current) {\n      emailSentOnMount.current = true;\n      sendEmailOrSms();\n    }\n  }, [sendEmailOrSms]);\n\n  if (screen === \"base\") {\n    return (\n      <Container fullHeight flex=\"column\" animate=\"fadein\">\n        <Container p=\"lg\">\n          <ModalHeader title={locale.signIn} onBack={goBack} />\n        </Container>\n\n        <Container expand flex=\"column\" center=\"y\">\n          <form\n            onSubmit={(e) => {\n              e.preventDefault();\n            }}\n          >\n            <Container flex=\"column\" center=\"x\" px=\"lg\">\n              {!isWideModal && <Spacer y=\"xl\" />}\n              <Text>{locale.emailLoginScreen.enterCodeSendTo}</Text>\n              <Spacer y=\"sm\" />\n              <Text color=\"primaryText\">\n                {\"email\" in userInfo ? userInfo.email : userInfo.phone}\n              </Text>\n              <Spacer y=\"xl\" />\n            </Container>\n\n            <OTPInput\n              isInvalid={verifyStatus === \"invalid\"}\n              digits={6}\n              value={otpInput}\n              setValue={(value) => {\n                setOtpInput(value);\n                setVerifyStatus(\"idle\"); // reset error\n              }}\n              onEnter={() => {\n                verify(otpInput);\n              }}\n            />\n\n            {verifyStatus === \"invalid\" && (\n              <FadeIn>\n                <Spacer y=\"md\" />\n                <Text size=\"sm\" color=\"danger\" center>\n                  {locale.emailLoginScreen.invalidCode}\n                </Text>\n              </FadeIn>\n            )}\n\n            {verifyStatus === \"linking_error\" && (\n              <FadeIn>\n                <Spacer y=\"md\" />\n                <Text size=\"sm\" color=\"danger\" center>\n                  {error || \"Failed to verify code\"}\n                </Text>\n              </FadeIn>\n            )}\n\n            {verifyStatus === \"payment_required\" && (\n              <FadeIn>\n                <Spacer y=\"md\" />\n                <Text size=\"sm\" color=\"danger\" center>\n                  {locale.maxAccountsExceeded}\n                </Text>\n              </FadeIn>\n            )}\n\n            <Spacer y=\"xl\" />\n\n            <Container px={isWideModal ? \"xxl\" : \"lg\"}>\n              {verifyStatus === \"verifying\" ? (\n                <>\n                  <Container flex=\"row\" center=\"x\" animate=\"fadein\">\n                    <Spinner size=\"lg\" color=\"accentText\" />\n                  </Container>\n                </>\n              ) : (\n                <Container animate=\"fadein\" key=\"btn-container\">\n                  <Button\n                    onClick={() => verify(otpInput)}\n                    variant=\"accent\"\n                    type=\"submit\"\n                    style={{\n                      width: \"100%\",\n                    }}\n                  >\n                    {locale.emailLoginScreen.verify}\n                  </Button>\n                </Container>\n              )}\n            </Container>\n\n            <Spacer y=\"xl\" />\n\n            {!isWideModal && <Line />}\n\n            <Container p={isWideModal ? undefined : \"lg\"}>\n              {accountStatus === \"error\" && (\n                <Text size=\"sm\" center color=\"danger\">\n                  {locale.emailLoginScreen.failedToSendCode}\n                </Text>\n              )}\n\n              {accountStatus === \"sending\" && (\n                <Container\n                  flex=\"row\"\n                  center=\"both\"\n                  gap=\"xs\"\n                  style={{\n                    textAlign: \"center\",\n                  }}\n                >\n                  <Text size=\"sm\">{locale.emailLoginScreen.sendingCode}</Text>\n                  <Spinner size=\"xs\" color=\"secondaryText\" />\n                </Container>\n              )}\n\n              {accountStatus === \"sent\" && (\n                <LinkButton onClick={sendEmailOrSms} type=\"button\">\n                  {locale.emailLoginScreen.resendCode}\n                </LinkButton>\n              )}\n            </Container>\n          </form>\n        </Container>\n      </Container>\n    );\n  }\n\n  return null;\n}\n\nconst LinkButton = /* @__PURE__ */ StyledButton((_) => {\n  const theme = useCustomTheme();\n  return {\n    all: \"unset\",\n    color: theme.colors.accentText,\n    fontSize: fontSize.sm,\n    cursor: \"pointer\",\n    textAlign: \"center\",\n    fontWeight: 500,\n    width: \"100%\",\n    \"&:hover\": {\n      color: theme.colors.primaryText,\n    },\n  };\n});\n", "import { fadeInAnimation } from \"../design-system/animations.js\";\nimport { StyledDiv } from \"../design-system/elements.js\";\n\nexport const FadeIn = /* @__PURE__ */ StyledDiv({\n  animation: `${fadeInAnimation} 0.15s ease-in`,\n});\n", "'use client'\n\nimport * as React from 'react'\n\nimport { syncTimeouts } from './sync-timeouts'\nimport { OTPInputProps, RenderProps } from './types'\nimport { usePrevious } from './use-previous'\nimport { usePasswordManagerBadge } from './use-pwm-badge'\n\nexport const OTPInputContext = React.createContext<RenderProps>(\n  {} as RenderProps,\n)\n\nexport const OTPInput = React.forwardRef<HTMLInputElement, OTPInputProps>(\n  (\n    {\n      value: uncheckedValue,\n      onChange: uncheckedOnChange,\n      maxLength,\n      textAlign = 'left',\n      pattern,\n      placeholder,\n      inputMode = 'numeric',\n      onComplete,\n      pushPasswordManagerStrategy = 'increase-width',\n      pasteTransformer,\n      containerClassName,\n      noScriptCSSFallback = NOSCRIPT_CSS_FALLBACK,\n\n      render,\n      children,\n\n      ...props\n    },\n    ref,\n  ) => {\n    // Only used when `value` state is not provided\n    const [internalValue, setInternalValue] = React.useState(\n      typeof props.defaultValue === 'string' ? props.defaultValue : '',\n    )\n\n    // Definitions\n    const value = uncheckedValue ?? internalValue\n    const previousValue = usePrevious(value)\n    const onChange = React.useCallback(\n      (newValue: string) => {\n        uncheckedOnChange?.(newValue)\n        setInternalValue(newValue)\n      },\n      [uncheckedOnChange],\n    )\n    const regexp = React.useMemo(\n      () =>\n        pattern\n          ? typeof pattern === 'string'\n            ? new RegExp(pattern)\n            : pattern\n          : null,\n      [pattern],\n    )\n\n    /** useRef */\n    const inputRef = React.useRef<HTMLInputElement>(null)\n    const containerRef = React.useRef<HTMLDivElement>(null)\n    const initialLoadRef = React.useRef({\n      value,\n      onChange,\n      isIOS:\n        typeof window !== 'undefined' &&\n        window?.CSS?.supports?.('-webkit-touch-callout', 'none'),\n    })\n    const inputMetadataRef = React.useRef<{\n      prev: [number | null, number | null, 'none' | 'forward' | 'backward']\n    }>({\n      prev: [\n        inputRef.current?.selectionStart,\n        inputRef.current?.selectionEnd,\n        inputRef.current?.selectionDirection,\n      ],\n    })\n    React.useImperativeHandle(ref, () => inputRef.current, [])\n    React.useEffect(() => {\n      const input = inputRef.current\n      const container = containerRef.current\n\n      if (!input || !container) {\n        return\n      }\n\n      // Sync input value\n      if (initialLoadRef.current.value !== input.value) {\n        initialLoadRef.current.onChange(input.value)\n      }\n\n      // Previous selection\n      inputMetadataRef.current.prev = [\n        input.selectionStart,\n        input.selectionEnd,\n        input.selectionDirection,\n      ]\n      function onDocumentSelectionChange() {\n        if (document.activeElement !== input) {\n          setMirrorSelectionStart(null)\n          setMirrorSelectionEnd(null)\n          return\n        }\n\n        // Aliases\n        const _s = input.selectionStart\n        const _e = input.selectionEnd\n        const _dir = input.selectionDirection\n        const _ml = input.maxLength\n        const _val = input.value\n        const _prev = inputMetadataRef.current.prev\n\n        // Algorithm\n        let start = -1\n        let end = -1\n        let direction: 'forward' | 'backward' | 'none' = undefined\n        if (_val.length !== 0 && _s !== null && _e !== null) {\n          const isSingleCaret = _s === _e\n          const isInsertMode = _s === _val.length && _val.length < _ml\n\n          if (isSingleCaret && !isInsertMode) {\n            const c = _s\n            if (c === 0) {\n              start = 0\n              end = 1\n              direction = 'forward'\n            } else if (c === _ml) {\n              start = c - 1\n              end = c\n              direction = 'backward'\n            } else if (_ml > 1 && _val.length > 1) {\n              let offset = 0\n              if (_prev[0] !== null && _prev[1] !== null) {\n                direction = c < _prev[1] ? 'backward' : 'forward'\n                const wasPreviouslyInserting =\n                  _prev[0] === _prev[1] && _prev[0] < _ml\n                if (direction === 'backward' && !wasPreviouslyInserting) {\n                  offset = -1\n                }\n              }\n\n              start = offset + c\n              end = offset + c + 1\n            }\n          }\n\n          if (start !== -1 && end !== -1 && start !== end) {\n            inputRef.current.setSelectionRange(start, end, direction)\n          }\n        }\n\n        // Finally, update the state\n        const s = start !== -1 ? start : _s\n        const e = end !== -1 ? end : _e\n        const dir = direction ?? _dir\n        setMirrorSelectionStart(s)\n        setMirrorSelectionEnd(e)\n        // Store the previous selection value\n        inputMetadataRef.current.prev = [s, e, dir]\n      }\n      document.addEventListener('selectionchange', onDocumentSelectionChange, {\n        capture: true,\n      })\n\n      // Set initial mirror state\n      onDocumentSelectionChange()\n      document.activeElement === input && setIsFocused(true)\n\n      // Apply needed styles\n      if (!document.getElementById('input-otp-style')) {\n        const styleEl = document.createElement('style')\n        styleEl.id = 'input-otp-style'\n        document.head.appendChild(styleEl)\n\n        if (styleEl.sheet) {\n          const autofillStyles =\n            'background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;'\n\n          safeInsertRule(\n            styleEl.sheet,\n            '[data-input-otp]::selection { background: transparent !important; color: transparent !important; }',\n          )\n          safeInsertRule(\n            styleEl.sheet,\n            `[data-input-otp]:autofill { ${autofillStyles} }`,\n          )\n          safeInsertRule(\n            styleEl.sheet,\n            `[data-input-otp]:-webkit-autofill { ${autofillStyles} }`,\n          )\n          // iOS\n          safeInsertRule(\n            styleEl.sheet,\n            `@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }`,\n          )\n          // PWM badges\n          safeInsertRule(\n            styleEl.sheet,\n            `[data-input-otp] + * { pointer-events: all !important; }`,\n          )\n        }\n      }\n      // Track root height\n      const updateRootHeight = () => {\n        if (container) {\n          container.style.setProperty(\n            '--root-height',\n            `${input.clientHeight}px`,\n          )\n        }\n      }\n      updateRootHeight()\n      const resizeObserver = new ResizeObserver(updateRootHeight)\n      resizeObserver.observe(input)\n\n      return () => {\n        document.removeEventListener(\n          'selectionchange',\n          onDocumentSelectionChange,\n          { capture: true },\n        )\n        resizeObserver.disconnect()\n      }\n    }, [])\n\n    /** Mirrors for UI rendering purpose only */\n    const [isHoveringInput, setIsHoveringInput] = React.useState(false)\n    const [isFocused, setIsFocused] = React.useState(false)\n    const [mirrorSelectionStart, setMirrorSelectionStart] = React.useState<\n      number | null\n    >(null)\n    const [mirrorSelectionEnd, setMirrorSelectionEnd] = React.useState<\n      number | null\n    >(null)\n\n    /** Effects */\n    React.useEffect(() => {\n      syncTimeouts(() => {\n        // Forcefully remove :autofill state\n        inputRef.current?.dispatchEvent(new Event('input'))\n\n        // Update the selection state\n        const s = inputRef.current?.selectionStart\n        const e = inputRef.current?.selectionEnd\n        const dir = inputRef.current?.selectionDirection\n        if (s !== null && e !== null) {\n          setMirrorSelectionStart(s)\n          setMirrorSelectionEnd(e)\n          inputMetadataRef.current.prev = [s, e, dir]\n        }\n      })\n    }, [value, isFocused])\n\n    React.useEffect(() => {\n      if (previousValue === undefined) {\n        return\n      }\n\n      if (\n        value !== previousValue &&\n        previousValue.length < maxLength &&\n        value.length === maxLength\n      ) {\n        onComplete?.(value)\n      }\n    }, [maxLength, onComplete, previousValue, value])\n\n    const pwmb = usePasswordManagerBadge({\n      containerRef,\n      inputRef,\n      pushPasswordManagerStrategy,\n      isFocused,\n    })\n\n    /** Event handlers */\n    const _changeListener = React.useCallback(\n      (e: React.ChangeEvent<HTMLInputElement>) => {\n        const newValue = e.currentTarget.value.slice(0, maxLength)\n        if (newValue.length > 0 && regexp && !regexp.test(newValue)) {\n          e.preventDefault()\n          return\n        }\n        const maybeHasDeleted =\n          typeof previousValue === 'string' &&\n          newValue.length < previousValue.length\n        if (maybeHasDeleted) {\n          // Since cutting/deleting text doesn't trigger\n          // selectionchange event, we'll have to dispatch it manually.\n          // NOTE: The following line also triggers when cmd+A then pasting\n          // a value with smaller length, which is not ideal for performance.\n          document.dispatchEvent(new Event('selectionchange'))\n        }\n        onChange(newValue)\n      },\n      [maxLength, onChange, previousValue, regexp],\n    )\n    const _focusListener = React.useCallback(() => {\n      if (inputRef.current) {\n        const start = Math.min(inputRef.current.value.length, maxLength - 1)\n        const end = inputRef.current.value.length\n        inputRef.current?.setSelectionRange(start, end)\n        setMirrorSelectionStart(start)\n        setMirrorSelectionEnd(end)\n      }\n      setIsFocused(true)\n    }, [maxLength])\n    // Fix iOS pasting\n    const _pasteListener = React.useCallback(\n      (e: React.ClipboardEvent<HTMLInputElement>) => {\n        const input = inputRef.current\n        if (!pasteTransformer && (!initialLoadRef.current.isIOS || !e.clipboardData || !input)) {\n          return\n        }\n        \n        const _content = e.clipboardData.getData('text/plain')\n        const content = pasteTransformer\n          ? pasteTransformer(_content)\n          : _content\n        console.log({_content,content})\n        e.preventDefault()\n\n        const start = inputRef.current?.selectionStart\n        const end = inputRef.current?.selectionEnd\n\n        const isReplacing = start !== end\n\n        const newValueUncapped = isReplacing\n          ? value.slice(0, start) + content + value.slice(end) // Replacing\n          : value.slice(0, start) + content + value.slice(start) // Inserting\n        const newValue = newValueUncapped.slice(0, maxLength)\n\n        if (newValue.length > 0 && regexp && !regexp.test(newValue)) {\n          return\n        }\n\n        input.value = newValue\n        onChange(newValue)\n\n        const _start = Math.min(newValue.length, maxLength - 1)\n        const _end = newValue.length\n\n        input.setSelectionRange(_start, _end)\n        setMirrorSelectionStart(_start)\n        setMirrorSelectionEnd(_end)\n      },\n      [maxLength, onChange, regexp, value],\n    )\n\n    /** Styles */\n    const rootStyle = React.useMemo<React.CSSProperties>(\n      () => ({\n        position: 'relative',\n        cursor: props.disabled ? 'default' : 'text',\n        userSelect: 'none',\n        WebkitUserSelect: 'none',\n        pointerEvents: 'none',\n      }),\n      [props.disabled],\n    )\n\n    const inputStyle = React.useMemo<React.CSSProperties>(\n      () => ({\n        position: 'absolute',\n        inset: 0,\n        width: pwmb.willPushPWMBadge\n          ? `calc(100% + ${pwmb.PWM_BADGE_SPACE_WIDTH})`\n          : '100%',\n        clipPath: pwmb.willPushPWMBadge\n          ? `inset(0 ${pwmb.PWM_BADGE_SPACE_WIDTH} 0 0)`\n          : undefined,\n        height: '100%',\n        display: 'flex',\n        textAlign,\n        opacity: '1', // Mandatory for iOS hold-paste\n        color: 'transparent',\n        pointerEvents: 'all',\n        background: 'transparent',\n        caretColor: 'transparent',\n        border: '0 solid transparent',\n        outline: '0 solid transparent',\n        boxShadow: 'none',\n        lineHeight: '1',\n        letterSpacing: '-.5em',\n        fontSize: 'var(--root-height)',\n        fontFamily: 'monospace',\n        fontVariantNumeric: 'tabular-nums',\n        // letterSpacing: '-1em',\n        // transform: 'scale(1.5)',\n        // paddingRight: '100%',\n        // paddingBottom: '100%',\n        // debugging purposes\n        // inset: undefined,\n        // position: undefined,\n        // color: 'black',\n        // background: 'white',\n        // opacity: '1',\n        // caretColor: 'black',\n        // padding: '0',\n        // letterSpacing: 'unset',\n        // fontSize: 'unset',\n        // paddingInline: '.5rem',\n      }),\n      [pwmb.PWM_BADGE_SPACE_WIDTH, pwmb.willPushPWMBadge, textAlign],\n    )\n\n    /** Rendering */\n    const renderedInput = React.useMemo(\n      () => (\n        <input\n          autoComplete={props.autoComplete || 'one-time-code'}\n          {...props}\n          data-input-otp\n          data-input-otp-placeholder-shown={value.length === 0 || undefined}\n          data-input-otp-mss={mirrorSelectionStart}\n          data-input-otp-mse={mirrorSelectionEnd}\n          inputMode={inputMode}\n          pattern={regexp?.source}\n          aria-placeholder={placeholder}\n          style={inputStyle}\n          maxLength={maxLength}\n          value={value}\n          ref={inputRef}\n          onPaste={e => {\n            _pasteListener(e)\n            props.onPaste?.(e)\n          }}\n          onChange={_changeListener}\n          onMouseOver={e => {\n            setIsHoveringInput(true)\n            props.onMouseOver?.(e)\n          }}\n          onMouseLeave={e => {\n            setIsHoveringInput(false)\n            props.onMouseLeave?.(e)\n          }}\n          onFocus={e => {\n            _focusListener()\n            props.onFocus?.(e)\n          }}\n          onBlur={e => {\n            setIsFocused(false)\n            props.onBlur?.(e)\n          }}\n        />\n      ),\n      [\n        _changeListener,\n        _focusListener,\n        _pasteListener,\n        inputMode,\n        inputStyle,\n        maxLength,\n        mirrorSelectionEnd,\n        mirrorSelectionStart,\n        props,\n        regexp?.source,\n        value,\n      ],\n    )\n\n    const contextValue = React.useMemo<RenderProps>(() => {\n      return {\n        slots: Array.from({ length: maxLength }).map((_, slotIdx) => {\n          const isActive =\n            isFocused &&\n            mirrorSelectionStart !== null &&\n            mirrorSelectionEnd !== null &&\n            ((mirrorSelectionStart === mirrorSelectionEnd &&\n              slotIdx === mirrorSelectionStart) ||\n              (slotIdx >= mirrorSelectionStart && slotIdx < mirrorSelectionEnd))\n\n          const char = value[slotIdx] !== undefined ? value[slotIdx] : null\n          const placeholderChar = value[0] !== undefined ? null : placeholder?.[slotIdx] ?? null\n\n          return {\n            char,\n            placeholderChar,\n            isActive,\n            hasFakeCaret: isActive && char === null,\n          }\n        }),\n        isFocused,\n        isHovering: !props.disabled && isHoveringInput,\n      }\n    }, [\n      isFocused,\n      isHoveringInput,\n      maxLength,\n      mirrorSelectionEnd,\n      mirrorSelectionStart,\n      props.disabled,\n      value,\n    ])\n\n    const renderedChildren = React.useMemo(() => {\n      if (render) {\n        return render(contextValue)\n      }\n      return (\n        <OTPInputContext.Provider value={contextValue}>\n          {children}\n        </OTPInputContext.Provider>\n      )\n    }, [children, contextValue, render])\n\n    return (\n      <>\n        {noScriptCSSFallback !== null && (\n          <noscript>\n            <style>{noScriptCSSFallback}</style>\n          </noscript>\n        )}\n\n        <div\n          ref={containerRef}\n          data-input-otp-container\n          style={rootStyle}\n          className={containerClassName}\n        >\n          {renderedChildren}\n\n          <div\n            style={{\n              position: 'absolute',\n              inset: 0,\n              pointerEvents: 'none',\n            }}\n          >\n            {renderedInput}\n          </div>\n        </div>\n      </>\n    )\n  },\n)\nOTPInput.displayName = 'Input'\n\nfunction safeInsertRule(sheet: CSSStyleSheet, rule: string) {\n  try {\n    sheet.insertRule(rule)\n  } catch {\n    console.error('input-otp could not insert CSS rule:', rule)\n  }\n}\n\n// Decided to go with <noscript>\n// instead of `scripting` CSS media query\n// because it's a fallback for initial page load\n// and the <script> tag won't be loaded\n// unless the user has JS disabled.\nconst NOSCRIPT_CSS_FALLBACK = `\n[data-input-otp] {\n  --nojs-bg: white !important;\n  --nojs-fg: black !important;\n\n  background-color: var(--nojs-bg) !important;\n  color: var(--nojs-fg) !important;\n  caret-color: var(--nojs-fg) !important;\n  letter-spacing: .25em !important;\n  text-align: center !important;\n  border: 1px solid var(--nojs-fg) !important;\n  border-radius: 4px !important;\n  width: 100% !important;\n}\n@media (prefers-color-scheme: dark) {\n  [data-input-otp] {\n    --nojs-bg: black !important;\n    --nojs-fg: white !important;\n  }\n}`\n", "export function syncTimeouts(cb: (...args: any[]) => unknown): number[] {\n  const t1 = setTimeout(cb, 0) // For faster machines\n  const t2 = setTimeout(cb, 1_0)\n  const t3 = setTimeout(cb, 5_0)\n  return [t1, t2, t3]\n}\n", "import * as React from 'react'\n\nexport function usePrevious<T>(value: T) {\n  const ref = React.useRef<T>()\n  React.useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n", "import * as React from 'react'\nimport { OTPInputProps } from './types'\n\nconst PWM_BADGE_MARGIN_RIGHT = 18\nconst PWM_BADGE_SPACE_WIDTH_PX = 40\nconst PWM_BADGE_SPACE_WIDTH = `${PWM_BADGE_SPACE_WIDTH_PX}px` as const\n\nconst PASSWORD_MANAGERS_SELECTORS = [\n  '[data-lastpass-icon-root]', // LastPass\n  'com-1password-button', // 1Password\n  '[data-dashlanecreated]', // Dashlane\n  '[style$=\"2147483647 !important;\"]', // Bitwarden\n].join(',')\n\nexport function usePasswordManagerBadge({\n  containerRef,\n  inputRef,\n  pushPasswordManagerStrategy,\n  isFocused,\n}: {\n  containerRef: React.RefObject<HTMLDivElement>\n  inputRef: React.RefObject<HTMLInputElement>\n  pushPasswordManagerStrategy: OTPInputProps['pushPasswordManagerStrategy']\n  isFocused: boolean\n}) {\n  /** Password managers have a badge\n   *  and I'll use this state to push them\n   *  outside the input */\n  const [hasPWMBadge, setHasPWMBadge] = React.useState(false)\n  const [hasPWMBadgeSpace, setHasPWMBadgeSpace] = React.useState(false)\n  const [done, setDone] = React.useState(false)\n\n  const willPushPWMBadge = React.useMemo(() => {\n    if (pushPasswordManagerStrategy === 'none') {\n      return false\n    }\n\n    const increaseWidthCase =\n      (pushPasswordManagerStrategy === 'increase-width' ||\n        // TODO: remove 'experimental-no-flickering' support in 2.0.0\n        pushPasswordManagerStrategy === 'experimental-no-flickering') &&\n      hasPWMBadge &&\n      hasPWMBadgeSpace\n\n    return increaseWidthCase\n  }, [hasPWMBadge, hasPWMBadgeSpace, pushPasswordManagerStrategy])\n\n  const trackPWMBadge = React.useCallback(() => {\n    const container = containerRef.current\n    const input = inputRef.current\n    if (\n      !container ||\n      !input ||\n      done ||\n      pushPasswordManagerStrategy === 'none'\n    ) {\n      return\n    }\n\n    const elementToCompare = container\n\n    // Get the top right-center point of the container.\n    // That is usually where most password managers place their badge.\n    const rightCornerX =\n      elementToCompare.getBoundingClientRect().left +\n      elementToCompare.offsetWidth\n    const centereredY =\n      elementToCompare.getBoundingClientRect().top +\n      elementToCompare.offsetHeight / 2\n    const x = rightCornerX - PWM_BADGE_MARGIN_RIGHT\n    const y = centereredY\n\n    // Do an extra search to check for famous password managers\n    const pmws = document.querySelectorAll(PASSWORD_MANAGERS_SELECTORS)\n\n    // If no password manager is automatically detect,\n    // we'll try to dispatch document.elementFromPoint\n    // to identify badges\n    if (pmws.length === 0) {\n      const maybeBadgeEl = document.elementFromPoint(x, y)\n\n      // If the found element is the input itself,\n      // then we assume it's not a password manager badge.\n      // We are not sure. Most times that means there isn't a badge.\n      if (maybeBadgeEl === container) {\n        return\n      }\n    }\n\n    setHasPWMBadge(true)\n    setDone(true)\n  }, [containerRef, inputRef, done, pushPasswordManagerStrategy])\n\n  React.useEffect(() => {\n    const container = containerRef.current\n    if (!container || pushPasswordManagerStrategy === 'none') {\n      return\n    }\n\n    // Check if the PWM area is 100% visible\n    function checkHasSpace() {\n      const viewportWidth = window.innerWidth\n      const distanceToRightEdge =\n        viewportWidth - container.getBoundingClientRect().right\n      setHasPWMBadgeSpace(distanceToRightEdge >= PWM_BADGE_SPACE_WIDTH_PX)\n    }\n\n    checkHasSpace()\n    const interval = setInterval(checkHasSpace, 1000)\n\n    return () => {\n      clearInterval(interval)\n    }\n  }, [containerRef, pushPasswordManagerStrategy])\n\n  React.useEffect(() => {\n    const _isFocused = isFocused || document.activeElement === inputRef.current\n\n    if (pushPasswordManagerStrategy === 'none' || !_isFocused) {\n      return\n    }\n    const t1 = setTimeout(trackPWMBadge, 0)\n    const t2 = setTimeout(trackPWMBadge, 2000)\n    const t3 = setTimeout(trackPWMBadge, 5000)\n    const t4 = setTimeout(() => {\n      setDone(true)\n    }, 6000)\n    return () => {\n      clearTimeout(t1)\n      clearTimeout(t2)\n      clearTimeout(t3)\n      clearTimeout(t4)\n    }\n  }, [inputRef, isFocused, pushPasswordManagerStrategy, trackPWMBadge])\n\n  return { hasPWMBadge, willPushPWMBadge, PWM_BADGE_SPACE_WIDTH }\n}\n", "export const REGEXP_ONLY_DIGITS = '^\\\\d+$'\nexport const REGEXP_ONLY_CHARS = '^[a-zA-Z]+$'\nexport const REGEXP_ONLY_DIGITS_AND_CHARS = '^[a-zA-Z0-9]+$'\n", "\"use client\";\nimport { keyframes } from \"@emotion/react\";\nimport { OTPInput as InputOTP, type SlotProps } from \"input-otp\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport {\n  fontSize,\n  radius,\n  spacing,\n} from \"../../../core/design-system/index.js\";\nimport { StyledDiv } from \"../design-system/elements.js\";\nimport { Container } from \"./basic.js\";\n\n/**\n * @internal\n */\nexport function OTPInput(props: {\n  digits: number;\n  isInvalid?: boolean;\n  value: string;\n  setValue: (value: string) => void;\n  onEnter: () => void;\n}) {\n  return (\n    <OTPInputContainer>\n      <InputOTP\n        onComplete={() => {\n          props.onEnter();\n        }}\n        maxLength={6}\n        value={props.value}\n        render={({ slots }) => (\n          <Container flex=\"row\" gap=\"xs\" center=\"both\">\n            {slots.map((slot, idx) => (\n              // biome-ignore lint/suspicious/noArrayIndexKey: index is the only valid key here\n              <Slot key={idx} {...slot} isInvalid={props.isInvalid} />\n            ))}\n          </Container>\n        )}\n        onChange={(newValue) => {\n          props.setValue(newValue);\n        }}\n      />\n    </OTPInputContainer>\n  );\n}\n\nconst OTPInputContainer = /* @__PURE__ */ StyledDiv({\n  \"& input\": {\n    maxWidth: \"100%\",\n  },\n});\n\nfunction Slot(props: SlotProps & { isInvalid?: boolean }) {\n  return (\n    <OTPInputBox data-active={props.isActive} data-error={props.isInvalid}>\n      {props.char !== null && <div>{props.char}</div>}\n      {props.hasFakeCaret && <FakeCaret />}\n    </OTPInputBox>\n  );\n}\n\nconst caretBlink = keyframes`\n  0%, 100% {\n    opacity: 0;\n  },\n  50% {\n    opacity: 1;\n  }\n  `;\n\nconst FakeCaret = StyledDiv((_) => {\n  const theme = useCustomTheme();\n  return {\n    position: \"absolute\",\n    pointerEvents: \"none\",\n    inset: 0,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    animation: `${caretBlink} 1s infinite`,\n    \"&::before\": {\n      content: \"''\",\n      display: \"block\",\n      width: \"1.5px\",\n      height: \"1em\",\n      backgroundColor: theme.colors.primaryText,\n    },\n  };\n});\n\nconst OTPInputBox = /* @__PURE__ */ StyledDiv((_) => {\n  const theme = useCustomTheme();\n  return {\n    position: \"relative\",\n    width: \"40px\",\n    height: \"40px\",\n    textAlign: \"center\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    fontSize: fontSize.md,\n    padding: spacing.xs,\n    boxSizing: \"border-box\",\n    transition: \"color 200ms ease\",\n    border: `2px solid ${theme.colors.borderColor}`,\n    \"&[data-active='true']\": {\n      borderColor: theme.colors.accentText,\n    },\n    color: theme.colors.primaryText,\n    borderRadius: radius.lg,\n    \"&[data-error='true']\": {\n      borderColor: theme.colors.danger,\n    },\n  };\n});\n", "import { useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { webLocalStorage } from \"../../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport { hasStoredPasskey } from \"../../../../wallets/in-app/web/lib/auth/passkeys.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport { iconSize } from \"../../../core/design-system/index.js\";\nimport { setLastAuthProvider } from \"../../../core/utils/storage.js\";\nimport { FingerPrintIcon } from \"../../ui/ConnectWallet/icons/FingerPrintIcon.js\";\nimport type { ConnectLocale } from \"../../ui/ConnectWallet/locale/types.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { Container, ModalHeader } from \"../../ui/components/basic.js\";\nimport { Button } from \"../../ui/components/buttons.js\";\nimport { ErrorState } from \"./ErrorState.js\";\nimport { LoadingScreen } from \"./LoadingScreen.js\";\nimport { LoadingState } from \"./LoadingState.js\";\n\n// is passkey stored?\n// - login\n// else\n// - show login or signup options\n\nexport function PassKeyLogin(props: {\n  wallet: Wallet;\n  locale: ConnectLocale;\n  done: () => void;\n  onBack?: () => void;\n  client: ThirdwebClient;\n  chain: Chain | undefined;\n  size: \"compact\" | \"wide\";\n  isLinking?: boolean;\n}) {\n  const { wallet, done, client, chain, size, locale } = props;\n  const [screen, setScreen] = useState<\n    \"select\" | \"login\" | \"loading\" | \"signup\"\n  >(\"loading\");\n\n  const triggered = useRef(false);\n  useEffect(() => {\n    if (triggered.current) {\n      return;\n    }\n\n    triggered.current = true;\n    hasStoredPasskey(\n      client,\n      isEcosystemWallet(wallet.id) ? wallet.id : undefined,\n    )\n      .then((isStored) => {\n        if (isStored) {\n          setScreen(\"login\");\n        } else {\n          setScreen(\"select\");\n        }\n      })\n      .catch(() => {\n        setScreen(\"select\");\n      });\n  }, [client, wallet.id]);\n\n  return (\n    <Container animate=\"fadein\" fullHeight flex=\"column\">\n      <Container p=\"lg\">\n        <ModalHeader\n          title={\n            props.isLinking\n              ? locale.passkeys.linkPasskey\n              : locale.passkeys.title\n          }\n          onBack={props.onBack}\n        />\n      </Container>\n\n      <Container\n        px={size === \"wide\" ? \"xxl\" : \"lg\"}\n        expand\n        flex=\"column\"\n        center=\"y\"\n      >\n        <div>\n          {screen === \"loading\" && (\n            <>\n              <LoadingScreen />\n              <Spacer y=\"xxl\" />\n            </>\n          )}\n\n          {screen === \"select\" && (\n            <SelectLoginMethod\n              onSignin={() => {\n                setScreen(\"login\");\n              }}\n              onSignup={() => {\n                setScreen(\"signup\");\n              }}\n            />\n          )}\n\n          {screen === \"login\" && (\n            <LoginScreen\n              wallet={wallet}\n              client={client}\n              done={done}\n              onCreate={() => {\n                setScreen(\"signup\");\n              }}\n              chain={chain}\n              isLinking={props.isLinking}\n            />\n          )}\n\n          {screen === \"signup\" && (\n            <SignupScreen\n              wallet={wallet}\n              client={client}\n              done={done}\n              chain={chain}\n              isLinking={props.isLinking}\n            />\n          )}\n        </div>\n      </Container>\n    </Container>\n  );\n}\n\nfunction LoginScreen(props: {\n  wallet: Wallet;\n  done: () => void;\n  client: ThirdwebClient;\n  onCreate: () => void;\n  chain?: Chain;\n  isLinking?: boolean;\n}) {\n  const { wallet, done, client, chain } = props;\n  const [status, setStatus] = useState<\"loading\" | \"error\">(\"loading\");\n  const [error, setError] = useState<string | undefined>();\n\n  async function login() {\n    setStatus(\"loading\");\n    try {\n      if (props.isLinking) {\n        await linkProfile({\n          client,\n          strategy: \"passkey\",\n          type: \"sign-in\",\n        }).catch((e) => {\n          setError(e.message);\n          throw e;\n        });\n      } else {\n        await wallet.connect({\n          client: client,\n          strategy: \"passkey\",\n          type: \"sign-in\",\n          chain,\n        });\n        await setLastAuthProvider(\"passkey\", webLocalStorage);\n      }\n      done();\n    } catch (e) {\n      console.error(\"Failed to login with passkey\", e);\n      setStatus(\"error\");\n    }\n  }\n\n  const triggered = useRef(false);\n  useEffect(() => {\n    if (triggered.current) {\n      return;\n    }\n\n    triggered.current = true;\n    login();\n  });\n\n  if (status === \"loading\") {\n    return (\n      <LoadingState\n        title=\"Requesting Passkey\"\n        subtitle=\"A pop-up prompt will appear to sign-in and verify your passkey\"\n        icon={<FingerPrintIcon size={iconSize.xxl} />}\n      />\n    );\n  }\n\n  if (status === \"error\") {\n    return (\n      <>\n        <ErrorState onTryAgain={login} title={error || \"Failed to Login\"} />\n        <Spacer y=\"sm\" />\n        <Button variant=\"outline\" fullWidth onClick={props.onCreate}>\n          Create a new Passkey\n        </Button>\n        <Spacer y=\"lg\" />\n      </>\n    );\n  }\n\n  return null;\n}\n\nfunction SignupScreen(props: {\n  wallet: Wallet;\n  done: () => void;\n  client: ThirdwebClient;\n  chain?: Chain;\n  isLinking?: boolean;\n}) {\n  const { wallet, done, client, chain } = props;\n  const [error, setError] = useState<string | undefined>();\n  const [status, setStatus] = useState<\"loading\" | \"error\">(\"loading\");\n  const ecosystem = isEcosystemWallet(wallet)\n    ? {\n        id: wallet.id,\n        partnerId: wallet.getConfig()?.partnerId,\n      }\n    : undefined;\n\n  async function signup() {\n    setStatus(\"loading\");\n    try {\n      if (props.isLinking) {\n        await linkProfile({\n          client,\n          strategy: \"passkey\",\n          type: \"sign-up\",\n          ecosystem,\n        });\n      } else {\n        await wallet.connect({\n          client: client,\n          strategy: \"passkey\",\n          type: \"sign-up\",\n          chain,\n        });\n        await setLastAuthProvider(\"passkey\", webLocalStorage);\n      }\n      done();\n    } catch (e) {\n      console.error(e);\n      if (e instanceof Error) {\n        setError(`Error creating passkey: ${e.message}`);\n      }\n      setStatus(\"error\");\n    }\n  }\n\n  const triggered = useRef(false);\n  useEffect(() => {\n    if (triggered.current) {\n      return;\n    }\n\n    triggered.current = true;\n    signup();\n  });\n\n  if (status === \"loading\") {\n    return (\n      <LoadingState\n        title=\"Creating Passkey\"\n        subtitle=\"A pop-up prompt will appear to sign-in and verify your passkey\"\n        icon={<FingerPrintIcon size={iconSize.xxl} />}\n      />\n    );\n  }\n\n  if (status === \"error\") {\n    return (\n      <>\n        <ErrorState\n          onTryAgain={signup}\n          title={error || \"Failed to create passkey\"}\n        />\n        <Spacer y=\"lg\" />\n      </>\n    );\n  }\n\n  return null;\n}\n\nfunction SelectLoginMethod(props: {\n  onSignin: () => void;\n  onSignup: () => void;\n}) {\n  return (\n    <Container>\n      <Spacer y=\"xxl\" />\n      <Container flex=\"row\" center=\"x\" color=\"accentText\">\n        <FingerPrintIcon size={iconSize[\"4xl\"]} />\n      </Container>\n      <Spacer y=\"xl\" />\n      <Spacer y=\"xxl\" />\n\n      <Button variant=\"accent\" onClick={props.onSignup} fullWidth>\n        Create a Passkey\n      </Button>\n\n      <Spacer y=\"sm\" />\n      <Button variant=\"outline\" onClick={props.onSignin} fullWidth>\n        I have a Passkey\n      </Button>\n\n      <Spacer y=\"lg\" />\n    </Container>\n  );\n}\n", "import type { IconFC } from \"./types.js\";\n\n/**\n * @internal\n */\nexport const AccentFailIcon: IconFC = (props) => {\n  return (\n    <svg\n      width={props.size}\n      height={props.size}\n      viewBox=\"0 0 109 109\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      role=\"presentation\"\n    >\n      <g clipPath=\"url(#clip0_4036_4155)\">\n        <path\n          d=\"M54.5 109C84.5995 109 109 84.5995 109 54.5C109 24.4005 84.5995 0 54.5 0C24.4005 0 0 24.4005 0 54.5C0 84.5995 24.4005 109 54.5 109Z\"\n          fill=\"#4BABFF\"\n        />\n        <path\n          d=\"M55 96C77.6437 96 96 77.6437 96 55C96 32.3563 77.6437 14 55 14C32.3563 14 14 32.3563 14 55C14 77.6437 32.3563 96 55 96Z\"\n          fill=\"#1C85FF\"\n        />\n        <path\n          d=\"M73.2352 69.389C73.7459 69.8997 74.0329 70.5924 74.0329 71.3147C74.0329 72.037 73.7459 72.7298 73.2352 73.2405C72.7244 73.7513 72.0317 74.0382 71.3094 74.0382C70.5871 74.0382 69.8944 73.7513 69.3836 73.2405L54.9992 58.8515L40.6102 73.236C40.0994 73.7467 39.4067 74.0337 38.6844 74.0337C37.9621 74.0337 37.2694 73.7467 36.7586 73.236C36.2479 72.7252 35.9609 72.0325 35.9609 71.3102C35.9609 70.5879 36.2479 69.8952 36.7586 69.3844L51.1476 55L36.7632 40.611C36.2524 40.1002 35.9655 39.4075 35.9655 38.6852C35.9655 37.9629 36.2524 37.2702 36.7632 36.7594C37.2739 36.2487 37.9666 35.9617 38.6889 35.9617C39.4112 35.9617 40.104 36.2487 40.6147 36.7594L54.9992 51.1484L69.3881 36.7572C69.8989 36.2464 70.5916 35.9595 71.3139 35.9595C72.0362 35.9595 72.729 36.2464 73.2397 36.7572C73.7505 37.2679 74.0374 37.9606 74.0374 38.6829C74.0374 39.4052 73.7505 40.098 73.2397 40.6087L58.8507 55L73.2352 69.389Z\"\n          fill=\"url(#paint0_linear_4036_4155)\"\n        />\n      </g>\n      <defs>\n        <linearGradient\n          id=\"paint0_linear_4036_4155\"\n          x1=\"54.9992\"\n          y1=\"35.9595\"\n          x2=\"54.9992\"\n          y2=\"74.0382\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stopColor=\"white\" />\n          <stop offset=\"1\" stopColor=\"#90CBFF\" />\n        </linearGradient>\n        <clipPath id=\"clip0_4036_4155\">\n          <rect width=\"109\" height=\"109\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n};\n", "import { iconSize } from \"../../../../react/core/design-system/index.js\";\nimport { AccentFailIcon } from \"../../ui/ConnectWallet/icons/AccentFailIcon.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { Container } from \"../../ui/components/basic.js\";\nimport { Button } from \"../../ui/components/buttons.js\";\nimport { Text } from \"../../ui/components/text.js\";\n\nexport function ErrorState(props: {\n  onTryAgain: () => void;\n  title: string;\n}) {\n  return (\n    <Container animate=\"fadein\">\n      <Spacer y=\"xxl\" />\n      <Container flex=\"row\" center=\"x\">\n        <AccentFailIcon size={iconSize[\"3xl\"]} />\n      </Container>\n      <Spacer y=\"lg\" />\n      <Text center color=\"primaryText\" size=\"md\">\n        {props.title}\n      </Text>\n      <Spacer y=\"xl\" />\n      <Spacer y=\"xxl\" />\n      <Button variant=\"accent\" fullWidth onClick={props.onTryAgain}>\n        Try Again\n      </Button>\n    </Container>\n  );\n}\n", "import type { ReactNode } from \"react\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { Spinner } from \"../../ui/components/Spinner.js\";\nimport { Container } from \"../../ui/components/basic.js\";\nimport { Text } from \"../../ui/components/text.js\";\n\nexport function LoadingState(props: {\n  title: string;\n  subtitle: string;\n  icon: ReactNode;\n}) {\n  return (\n    <Container animate=\"fadein\">\n      <Spacer y=\"xxl\" />\n      <Container\n        flex=\"row\"\n        center=\"x\"\n        style={{\n          position: \"relative\",\n        }}\n      >\n        <Spinner size=\"4xl\" color=\"accentText\" />\n        <Container\n          color=\"accentText\"\n          style={{\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%, -50%)\",\n          }}\n        >\n          {props.icon}\n        </Container>\n      </Container>\n      <Spacer y=\"xl\" />\n      <Text center color=\"primaryText\" size=\"lg\">\n        {props.title}\n      </Text>\n      <Spacer y=\"md\" />\n      <Text multiline center>\n        {props.subtitle}\n      </Text>\n      <Spacer y=\"xxl\" />\n      <Spacer y=\"xxl\" />\n    </Container>\n  );\n}\n", "\"use client\";\nimport { useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { webLocalStorage } from \"../../../../utils/storage/webStorage.js\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport type { InAppWalletSocialAuth } from \"../../../../wallets/in-app/core/wallet/types.js\";\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport { loginWithOauthRedirect } from \"../../../../wallets/in-app/web/lib/auth/oauth.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport { setLastAuthProvider } from \"../../../core/utils/storage.js\";\nimport type { ConnectLocale } from \"../../ui/ConnectWallet/locale/types.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { Spinner } from \"../../ui/components/Spinner.js\";\nimport { Container, ModalHeader } from \"../../ui/components/basic.js\";\nimport { Button } from \"../../ui/components/buttons.js\";\nimport { Text } from \"../../ui/components/text.js\";\nimport type { ConnectWalletSelectUIState } from \"./ConnectWalletSocialOptions.js\";\nimport type { InAppWalletLocale } from \"./locale/types.js\";\nimport { openOauthSignInWindow } from \"./oauthSignIn.js\";\n\n/**\n * @internal\n */\nexport function SocialLogin(props: {\n  socialAuth: InAppWalletSocialAuth;\n  locale: InAppWalletLocale;\n  wallet: Wallet;\n  done: () => void;\n  goBack?: () => void;\n  state: ConnectWalletSelectUIState;\n  size: \"compact\" | \"wide\";\n  client: ThirdwebClient;\n  chain: Chain | undefined;\n  connectLocale: ConnectLocale;\n  isLinking?: boolean;\n}) {\n  const ewLocale = props.locale;\n  const locale = ewLocale.socialLoginScreen;\n  const themeObj = useCustomTheme();\n  const ecosystem = isEcosystemWallet(props.wallet)\n    ? {\n        id: props.wallet.id,\n        partnerId: props.wallet.getConfig()?.partnerId,\n      }\n    : undefined;\n\n  const [authError, setAuthError] = useState<string | undefined>(undefined);\n  const { done, wallet } = props;\n  const [status, setStatus] = useState<\"connecting\" | \"connected\" | \"error\">(\n    \"connecting\",\n  );\n\n  const handleSocialLogin = async () => {\n    const walletConfig = wallet.getConfig();\n    const authMode =\n      walletConfig && \"auth\" in walletConfig\n        ? (walletConfig?.auth?.mode ?? \"popup\")\n        : \"popup\";\n\n    if (\n      walletConfig &&\n      \"auth\" in walletConfig &&\n      authMode !== \"popup\" &&\n      !props.isLinking // Redirect not supported for account linking (we need to maintain the aplication state)\n    ) {\n      return loginWithOauthRedirect({\n        authOption: props.socialAuth,\n        client: props.client,\n        ecosystem,\n        redirectUrl: walletConfig?.auth?.redirectUrl,\n        mode: walletConfig?.auth?.mode,\n      });\n    }\n\n    try {\n      const socialWindow = openOauthSignInWindow({\n        authOption: props.socialAuth,\n        themeObj,\n        client: props.client,\n        ecosystem,\n      });\n\n      if (!socialWindow) {\n        throw new Error(`Failed to open ${props.socialAuth} login window`);\n      }\n\n      setStatus(\"connecting\");\n      if (props.isLinking) {\n        await linkProfile({\n          client: props.client,\n          strategy: props.socialAuth,\n          openedWindow: socialWindow,\n          closeOpenedWindow: (openedWindow) => {\n            openedWindow.close();\n          },\n          ecosystem,\n        }).catch((e) => {\n          setAuthError(e.message);\n          throw e;\n        });\n      } else {\n        await wallet.connect({\n          chain: props.chain,\n          strategy: props.socialAuth,\n          openedWindow: socialWindow,\n          closeOpenedWindow: (openedWindow) => {\n            openedWindow.close();\n          },\n          client: props.client,\n        });\n      }\n\n      await setLastAuthProvider(props.socialAuth, webLocalStorage);\n      setStatus(\"connected\");\n      done();\n    } catch (e) {\n      setStatus(\"error\");\n      // TODO this only happens on 'retry' button click, not on initial login\n      // should pass auth error message to this component\n      if (\n        e instanceof Error &&\n        e?.message?.includes(\"PAYMENT_METHOD_REQUIRED\")\n      ) {\n        setAuthError(ewLocale.maxAccountsExceeded);\n      }\n      console.error(`Error sign in with ${props.socialAuth}`, e);\n    }\n  };\n\n  // const { setModalVisibility } = props.connectUIProps.screenConfig;\n  const socialLogin = props.state?.socialLogin;\n\n  const socialLoginStarted = useRef(false);\n  useEffect(() => {\n    if (socialLoginStarted.current) {\n      return;\n    }\n\n    if (socialLogin) {\n      socialLoginStarted.current = true;\n      setStatus(\"connecting\");\n      socialLogin.connectionPromise\n        .then(() => {\n          done();\n          setStatus(\"connected\");\n        })\n        .catch((e) => {\n          setAuthError(e.message);\n          setStatus(\"error\");\n        });\n    }\n  }, [done, socialLogin]);\n\n  return (\n    <Container animate=\"fadein\" flex=\"column\" fullHeight>\n      <Container\n        flex=\"column\"\n        expand\n        p=\"lg\"\n        style={{\n          paddingBottom: 0,\n        }}\n      >\n        {props.goBack && (\n          <ModalHeader\n            title={\n              props.isLinking\n                ? props.connectLocale.manageWallet.linkProfile\n                : locale.title\n            }\n            onBack={props.goBack}\n          />\n        )}\n\n        {props.size === \"compact\" ? <Spacer y=\"xl\" /> : null}\n\n        <Container\n          flex=\"column\"\n          center=\"both\"\n          expand\n          style={{\n            textAlign: \"center\",\n            minHeight: \"250px\",\n          }}\n        >\n          {status !== \"error\" && (\n            <Container animate=\"fadein\">\n              <Text\n                color=\"primaryText\"\n                center\n                multiline\n                style={{\n                  maxWidth: \"250px\",\n                }}\n              >\n                {locale.instruction}\n              </Text>\n              <Spacer y=\"xl\" />\n              <Container center=\"x\" flex=\"row\">\n                <Spinner size=\"lg\" color=\"accentText\" />\n              </Container>\n\n              <Spacer y=\"xxl\" />\n            </Container>\n          )}\n\n          {status === \"error\" && (\n            <Container animate=\"fadein\">\n              {authError ? (\n                <Text center color=\"danger\">\n                  {authError}\n                </Text>\n              ) : (\n                <Text color=\"danger\">{locale.failed}</Text>\n              )}\n              <Spacer y=\"lg\" />\n              <Button variant=\"primary\" onClick={handleSocialLogin}>\n                {locale.retry}\n              </Button>\n              <Spacer y=\"xxl\" />\n            </Container>\n          )}\n        </Container>\n      </Container>\n    </Container>\n  );\n}\n", "import { Suspense, useRef, useState } from \"react\";\nimport { defineChain } from \"../../../../chains/utils.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport type { EcosystemWalletId } from \"../../../../wallets/wallet-types.js\";\nimport { iconSize } from \"../../../core/design-system/index.js\";\nimport { useAddConnectedWallet } from \"../../../core/hooks/wallets/useAddConnectedWallet.js\";\nimport AllWalletsUI from \"../../ui/ConnectWallet/Modal/AllWalletsUI.js\";\nimport { WalletSelector } from \"../../ui/ConnectWallet/WalletSelector.js\";\nimport type { ConnectLocale } from \"../../ui/ConnectWallet/locale/types.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { WalletImage } from \"../../ui/components/WalletImage.js\";\nimport { Container, ModalHeader } from \"../../ui/components/basic.js\";\nimport { getDefaultWallets } from \"../defaultWallets.js\";\nimport { ErrorState } from \"../shared/ErrorState.js\";\nimport { LoadingScreen } from \"../shared/LoadingScreen.js\";\nimport { LoadingState } from \"../shared/LoadingState.js\";\nimport type { InAppWalletLocale } from \"../shared/locale/types.js\";\n\nexport function WalletAuth(props: {\n  wallet: Wallet<\"inApp\" | EcosystemWalletId>;\n  client: ThirdwebClient;\n  done: () => void;\n  size: \"compact\" | \"wide\";\n  locale: ConnectLocale;\n  inAppLocale: InAppWalletLocale;\n  onBack: () => void;\n  walletConnect: { projectId?: string } | undefined;\n  isLinking: boolean;\n  meta?: {\n    title?: string;\n    titleIconUrl?: string;\n    showThirdwebBranding?: boolean;\n    termsOfServiceUrl?: string;\n    privacyPolicyUrl?: string;\n  };\n}) {\n  const { wallet, done } = props;\n  const addConnectedWallet = useAddConnectedWallet();\n  const walletToConnect = useRef<Wallet>(undefined);\n  const [status, setStatus] = useState<\"loading\" | \"error\" | \"selecting\">(\n    \"selecting\",\n  );\n  const [error, setError] = useState<string | undefined>();\n  const [showAll, setShowAll] = useState<boolean>(false);\n  const ecosystem = isEcosystemWallet(wallet)\n    ? {\n        id: wallet.id,\n        partnerId: wallet.getConfig()?.partnerId,\n      }\n    : undefined;\n\n  const back = () => {\n    setStatus(\"selecting\");\n    walletToConnect.current = undefined;\n    props.onBack();\n  };\n\n  async function login(walletToLink: Wallet) {\n    setStatus(\"loading\");\n    walletToConnect.current = walletToLink;\n    try {\n      if (props.isLinking) {\n        await linkProfile({\n          client: props.client,\n          strategy: \"wallet\",\n          wallet: walletToLink,\n          chain: wallet.getChain() || defineChain(1),\n          ecosystem,\n        }).catch((e) => {\n          setError(e.message);\n          throw e;\n        });\n      } else {\n        await wallet.connect({\n          client: props.client,\n          strategy: \"wallet\",\n          wallet: walletToLink,\n          chain: walletToLink.getChain() || defineChain(1),\n        });\n      }\n      addConnectedWallet(walletToLink);\n      done();\n    } catch {\n      setStatus(\"error\");\n    }\n  }\n\n  if (!walletToConnect.current) {\n    if (showAll) {\n      return (\n        <Suspense fallback={<LoadingScreen />}>\n          <AllWalletsUI\n            onBack={() => setShowAll(false)}\n            onSelect={async (newWallet) => {\n              login(newWallet);\n              setShowAll(false);\n            }}\n            client={props.client}\n            connectLocale={props.locale}\n            recommendedWallets={undefined}\n            specifiedWallets={[]}\n            size={props.size}\n            disableSelectionDataReset={true}\n          />\n        </Suspense>\n      );\n    }\n    return (\n      <WalletSelector\n        title={props.locale.connectAWallet}\n        wallets={getDefaultWallets()}\n        selectWallet={async (newWallet) => {\n          login(newWallet);\n        }}\n        onShowAll={() => {\n          setShowAll(true);\n        }}\n        done={() => {}}\n        goBack={back}\n        setModalVisibility={() => {}}\n        client={props.client}\n        connectLocale={props.locale}\n        hideHeader={false}\n        recommendedWallets={undefined}\n        chain={wallet.getChain()}\n        showAllWallets={true}\n        chains={[]}\n        size={props.size}\n        meta={props.meta || {}}\n        walletConnect={props.walletConnect}\n        modalHeader={{\n          title: props.isLinking\n            ? props.inAppLocale.linkWallet\n            : props.inAppLocale.signInWithWallet,\n          onBack: back,\n        }}\n        walletIdsToHide={[\"inApp\"]}\n        disableSelectionDataReset={true}\n      />\n    );\n  }\n\n  return (\n    <Container animate=\"fadein\" fullHeight flex=\"column\">\n      <Container p=\"lg\">\n        <ModalHeader\n          title={\n            props.isLinking\n              ? props.inAppLocale.linkWallet\n              : props.inAppLocale.signInWithWallet\n          }\n          onBack={back}\n        />\n      </Container>\n\n      <Container\n        px={props.size === \"wide\" ? \"xxl\" : \"lg\"}\n        expand\n        flex=\"column\"\n        center=\"y\"\n      >\n        <div>\n          {status === \"error\" ? (\n            <>\n              <ErrorState\n                onTryAgain={() => {\n                  if (!walletToConnect.current) {\n                    throw new Error(\"Failed to connect to unknown wallet\");\n                  }\n                  login(walletToConnect.current);\n                }}\n                title={error || \"Failed to Login\"}\n              />\n              <Spacer y=\"lg\" />\n            </>\n          ) : (\n            <>\n              <LoadingState\n                title=\"Sign in with your wallet\"\n                subtitle=\"A pop-up prompt will appear to sign-in and verify your wallet\"\n                icon={\n                  <WalletImage\n                    id={walletToConnect.current.id ?? \"\"}\n                    size={iconSize.xl}\n                    client={props.client}\n                  />\n                }\n              />\n            </>\n          )}\n        </div>\n      </Container>\n    </Container>\n  );\n}\n", "\"use client\";\n\nimport { useConnectionManagerCtx } from \"../../providers/connection-manager.js\";\n\n/**\n * A hook to add a connected wallet without setting the active wallet.\n * @returns A function that lets you add a connected wallet.\n * @example\n * ```jsx\n * import { useAddConnectedWallet } from \"thirdweb/react\";\n *\n * const addConnectedWallet = useAddConnectedWallet();\n *\n * // later in your code\n * await addConnectedWallet(wallet);\n * ```\n * @walletConnection\n */\nexport function useAddConnectedWallet() {\n  const manager = useConnectionManagerCtx(\"useAddConnectedWallet\");\n  return manager.handleConnection;\n}\n", "\"use client\";\nimport { ChevronLeftIcon } from \"@radix-ui/react-icons\";\nimport { Suspense, lazy, useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport type { InjectedSupportedWalletIds } from \"../../../../wallets/__generated__/wallet-ids.js\";\nimport { createWallet } from \"../../../../wallets/create-wallet.js\";\nimport { getInstalledWalletProviders } from \"../../../../wallets/injected/mipdStore.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport type { SmartWalletOptions } from \"../../../../wallets/smart/types.js\";\nimport type { WalletId } from \"../../../../wallets/wallet-types.js\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport {\n  fontSize,\n  iconSize,\n  radius,\n  spacing,\n} from \"../../../core/design-system/index.js\";\nimport { useSetSelectionData } from \"../../providers/wallet-ui-states-provider.js\";\nimport { sortWallets } from \"../../utils/sortWallets.js\";\nimport { LoadingScreen } from \"../../wallets/shared/LoadingScreen.js\";\nimport { Img } from \"../components/Img.js\";\nimport { Spacer } from \"../components/Spacer.js\";\nimport { TextDivider } from \"../components/TextDivider.js\";\nimport {\n  Container,\n  Line,\n  ModalHeader,\n  ScreenBottomContainer,\n  noScrollBar,\n} from \"../components/basic.js\";\nimport { Button, IconButton } from \"../components/buttons.js\";\nimport { ModalTitle } from \"../components/modalElements.js\";\nimport { Link } from \"../components/text.js\";\nimport { Text } from \"../components/text.js\";\nimport { StyledDiv, StyledUl } from \"../design-system/elements.js\";\nimport { SmartConnectUI } from \"./Modal/SmartWalletConnectUI.js\";\nimport { TOS } from \"./Modal/TOS.js\";\nimport { useScreenContext } from \"./Modal/screen.js\";\nimport { PoweredByThirdweb } from \"./PoweredByTW.js\";\nimport { WalletButtonEl, WalletEntryButton } from \"./WalletEntryButton.js\";\nimport { WalletTypeRowButton } from \"./WalletTypeRowButton.js\";\nimport { compactModalMaxHeight } from \"./constants.js\";\nimport { OutlineWalletIcon } from \"./icons/OutlineWalletIcon.js\";\nimport type { ConnectLocale } from \"./locale/types.js\";\n\nconst InAppWalletSelectionUI = /* @__PURE__ */ lazy(\n  () => import(\"../../wallets/in-app/InAppWalletSelectionUI.js\"),\n);\n\n// const localWalletId = \"local\";\nconst inAppWalletId: WalletId = \"inApp\";\n\ntype WalletSelectorProps = {\n  wallets: Wallet[];\n  selectWallet: (wallet: Wallet) => void;\n  title: string;\n  done: (wallet: Wallet) => void;\n  goBack?: () => void;\n  onShowAll: () => void;\n  setModalVisibility: (value: boolean) => void;\n  accountAbstraction?: SmartWalletOptions;\n  size: \"compact\" | \"wide\";\n  meta: {\n    title?: string;\n    titleIconUrl?: string;\n    showThirdwebBranding?: boolean;\n    termsOfServiceUrl?: string;\n    privacyPolicyUrl?: string;\n    requireApproval?: boolean;\n  };\n  client: ThirdwebClient;\n  connectLocale: ConnectLocale;\n  recommendedWallets: Wallet[] | undefined;\n  hideHeader: boolean;\n  chain: Chain | undefined;\n  chains: Chain[] | undefined;\n  showAllWallets: boolean | undefined;\n  walletConnect:\n    | {\n        projectId?: string;\n      }\n    | undefined;\n  modalHeader:\n    | {\n        title: string;\n        onBack: () => void;\n      }\n    | undefined;\n  walletIdsToHide: WalletId[] | undefined;\n  disableSelectionDataReset?: boolean;\n};\n\n/**\n * @internal\n */\nexport function WalletSelector(props: WalletSelectorProps) {\n  const [personalWallet, setPersonalWallet] = useState<Wallet | null>(null);\n\n  if (!props.accountAbstraction) {\n    return <WalletSelectorInner {...props} />;\n  }\n\n  if (personalWallet) {\n    return (\n      <SmartConnectUI\n        accountAbstraction={props.accountAbstraction}\n        done={props.done}\n        personalWallet={personalWallet}\n        setModalVisibility={props.setModalVisibility}\n        onBack={props.goBack}\n        meta={props.meta}\n        size={props.size}\n        chain={props.chain}\n        chains={props.chains}\n        client={props.client}\n        walletConnect={props.walletConnect}\n        connectLocale={props.connectLocale}\n      />\n    );\n  }\n\n  return (\n    <WalletSelectorInner\n      {...props}\n      done={(w) => {\n        setPersonalWallet(w);\n      }}\n    />\n  );\n}\n\n/**\n * @internal\n */\nconst WalletSelectorInner: React.FC<WalletSelectorProps> = (props) => {\n  const { walletIdsToHide } = props;\n  const isCompact = props.size === \"compact\";\n  const [isWalletGroupExpanded, setIsWalletGroupExpanded] = useState(false);\n  // This is only used if requireApproval is true\n  const [approvedTOS, setApprovedTOS] = useState(false);\n\n  const installedWallets = getInstalledWallets();\n  const propsWallets = props.wallets;\n  let _wallets: Wallet[] = [...propsWallets];\n\n  for (const iW of installedWallets) {\n    if (!propsWallets.find((w) => w.id === iW.id)) {\n      _wallets.push(iW);\n    }\n  }\n\n  if (walletIdsToHide) {\n    _wallets = _wallets.filter((w) => !walletIdsToHide?.includes(w.id));\n  }\n\n  const localWalletConfig = false; // _wallets.find((w) => w.id === localWalletId);\n\n  const nonLocalWalletConfigs = _wallets; // _wallets.filter((w) => w.id !== localWalletId);\n\n  const socialWallets = nonLocalWalletConfigs.filter(\n    (w) => w.id === inAppWalletId,\n  );\n\n  const eoaWallets = sortWallets(\n    nonLocalWalletConfigs.filter((w) => w.id !== inAppWalletId),\n    props.recommendedWallets,\n  );\n\n  const continueAsGuest = localWalletConfig && (\n    <Button\n      fullWidth\n      variant={isCompact ? \"outline\" : \"link\"}\n      style={\n        !isCompact\n          ? {\n              textAlign: \"left\",\n              justifyContent: \"flex-start\",\n            }\n          : undefined\n      }\n      onClick={() => {\n        props.selectWallet(localWalletConfig);\n      }}\n      data-test=\"continue-as-guest-button\"\n    >\n      {props.connectLocale.continueAsGuest}\n    </Button>\n  );\n\n  // prevent accidental clicks on the TW icon when clicking on back icon from previous screen\n  const enableTWIconLink = useRef(false);\n  useEffect(() => {\n    setTimeout(() => {\n      enableTWIconLink.current = true;\n    }, 1000);\n  }, []);\n\n  const twTitle = props.modalHeader ? (\n    <ModalHeader\n      title={props.modalHeader.title}\n      onBack={props.modalHeader.onBack}\n    />\n  ) : (\n    <Container gap=\"xxs\" center=\"y\" flex=\"row\">\n      {!props.meta.titleIconUrl ? null : (\n        <Img\n          src={props.meta.titleIconUrl}\n          width={iconSize.md}\n          height={iconSize.md}\n          client={props.client}\n        />\n      )}\n\n      <ModalTitle> {props.title} </ModalTitle>\n    </Container>\n  );\n\n  const handleSelect = async (wallet: Wallet) => {\n    // if (connectionStatus !== \"disconnected\") {\n    //   await disconnect();\n    // }\n    props.selectWallet(wallet);\n  };\n\n  const connectAWallet = (\n    <WalletTypeRowButton\n      client={props.client}\n      icon={OutlineWalletIcon}\n      onClick={() => {\n        setIsWalletGroupExpanded(true);\n      }}\n      title={props.connectLocale.connectAWallet}\n    />\n  );\n\n  const newToWallets = (\n    <Container\n      flex=\"row\"\n      style={{\n        justifyContent: \"space-between\",\n      }}\n    >\n      <Text color=\"secondaryText\" size=\"sm\" weight={500}>\n        {props.connectLocale.newToWallets}\n      </Text>\n      <Link\n        weight={500}\n        size=\"sm\"\n        target=\"_blank\"\n        href=\"https://blog.thirdweb.com/web3-wallet/\"\n      >\n        {props.connectLocale.getStarted}\n      </Link>\n    </Container>\n  );\n\n  const tos =\n    props.meta.requireApproval ||\n    props.meta.termsOfServiceUrl ||\n    props.meta.privacyPolicyUrl ? (\n      <TOS\n        termsOfServiceUrl={props.meta.termsOfServiceUrl}\n        privacyPolicyUrl={props.meta.privacyPolicyUrl}\n        locale={props.connectLocale.agreement}\n        requireApproval={props.meta.requireApproval}\n        isApproved={approvedTOS}\n        onApprove={() => setApprovedTOS(!approvedTOS)}\n      />\n    ) : undefined;\n\n  let topSection: React.ReactNode;\n  let bottomSection: React.ReactNode;\n\n  // wide modal\n  if (!isCompact) {\n    topSection = (\n      <WalletSelection\n        wallets={nonLocalWalletConfigs}\n        selectWallet={handleSelect}\n        done={props.done}\n        goBack={props.goBack}\n        onShowAll={props.onShowAll}\n        client={props.client}\n        connectLocale={props.connectLocale}\n        size={props.size}\n        recommendedWallets={props.recommendedWallets}\n        chain={props.chain}\n        showAllWallets={props.showAllWallets}\n        diableSelectionDataReset={props.disableSelectionDataReset}\n        disabled={props.meta.requireApproval && !approvedTOS}\n      />\n    );\n\n    if (continueAsGuest) {\n      bottomSection = (\n        <ScreenBottomContainer>{continueAsGuest}</ScreenBottomContainer>\n      );\n    }\n  }\n\n  // compact\n  else {\n    // no social logins\n    if (socialWallets.length === 0) {\n      topSection = (\n        <WalletSelection\n          wallets={nonLocalWalletConfigs}\n          selectWallet={handleSelect}\n          done={props.done}\n          goBack={props.goBack}\n          onShowAll={props.onShowAll}\n          client={props.client}\n          connectLocale={props.connectLocale}\n          size={props.size}\n          recommendedWallets={props.recommendedWallets}\n          chain={props.chain}\n          showAllWallets={props.showAllWallets}\n          diableSelectionDataReset={props.disableSelectionDataReset}\n          disabled={props.meta.requireApproval && !approvedTOS}\n        />\n      );\n\n      bottomSection = (\n        <>\n          <Line />\n          <Container flex=\"column\" p=\"md\" gap=\"md\">\n            {newToWallets}\n            {continueAsGuest}\n          </Container>\n          {!continueAsGuest && <Line />}\n          {tos && (\n            <Container\n              px=\"md\"\n              style={{\n                paddingBottom: spacing.md,\n                paddingTop: continueAsGuest ? 0 : spacing.md,\n              }}\n            >\n              {tos}\n            </Container>\n          )}\n        </>\n      );\n    }\n\n    // social logins\n    else {\n      // not expanded state\n      if (!isWalletGroupExpanded) {\n        topSection = (\n          <Container px=\"xs\">\n            <WalletSelection\n              wallets={socialWallets}\n              selectWallet={handleSelect}\n              done={props.done}\n              goBack={props.goBack}\n              client={props.client}\n              connectLocale={props.connectLocale}\n              size={props.size}\n              recommendedWallets={props.recommendedWallets}\n              chain={props.chain}\n              showAllWallets={props.showAllWallets}\n              diableSelectionDataReset={props.disableSelectionDataReset}\n              disabled={props.meta.requireApproval && !approvedTOS}\n            />\n            {eoaWallets.length > 0 && (\n              <>\n                <TextDivider text={props.connectLocale.or} />\n                <Spacer y=\"lg\" />\n              </>\n            )}\n          </Container>\n        );\n\n        // only social login - no eoa wallets\n        if (eoaWallets.length === 0) {\n          bottomSection =\n            tos || continueAsGuest ? (\n              <>\n                <Spacer y=\"md\" />\n                <Line />\n                {continueAsGuest && (\n                  <Container p=\"lg\"> {continueAsGuest}</Container>\n                )}\n                {tos && <Container p=\"md\"> {tos} </Container>}\n              </>\n            ) : (\n              <Spacer y=\"sm\" />\n            );\n        }\n\n        // social login + eoa wallets\n        else {\n          // social login + More than 1 eoa wallets\n          if (eoaWallets.length > 1) {\n            bottomSection = (\n              <Container\n                flex=\"column\"\n                style={{ position: \"relative\" }}\n                gap=\"sm\"\n              >\n                <GradientDiv />\n\n                <Container px=\"lg\" flex=\"column\" gap=\"md\">\n                  {connectAWallet}\n                  {continueAsGuest}\n                </Container>\n\n                {tos ? (\n                  <Container p=\"md\"> {tos} </Container>\n                ) : (\n                  <Spacer y=\"xxs\" />\n                )}\n              </Container>\n            );\n          }\n\n          // social login + single eoa wallet\n          else {\n            bottomSection = (\n              <>\n                <Container px=\"lg\">\n                  <WalletSelection\n                    wallets={eoaWallets}\n                    selectWallet={handleSelect}\n                    done={props.done}\n                    goBack={props.goBack}\n                    onShowAll={props.onShowAll}\n                    client={props.client}\n                    connectLocale={props.connectLocale}\n                    size={props.size}\n                    recommendedWallets={props.recommendedWallets}\n                    chain={props.chain}\n                    showAllWallets={props.showAllWallets}\n                    diableSelectionDataReset={props.disableSelectionDataReset}\n                    disabled={props.meta.requireApproval && !approvedTOS}\n                  />\n                </Container>\n\n                {continueAsGuest && (\n                  <Container flex=\"column\" px=\"lg\" gap=\"lg\">\n                    {continueAsGuest}\n                  </Container>\n                )}\n\n                {tos ? (\n                  <>\n                    {continueAsGuest ? <Spacer y=\"md\" /> : <Line />}\n                    <Container p=\"md\"> {tos} </Container>\n                  </>\n                ) : (\n                  <>{continueAsGuest && <Spacer y=\"xl\" />}</>\n                )}\n              </>\n            );\n          }\n        }\n      }\n\n      // expanded state\n      else {\n        topSection = (\n          <WalletSelection\n            wallets={eoaWallets}\n            selectWallet={handleSelect}\n            done={props.done}\n            goBack={props.goBack}\n            onShowAll={props.onShowAll}\n            client={props.client}\n            connectLocale={props.connectLocale}\n            size={props.size}\n            recommendedWallets={props.recommendedWallets}\n            chain={props.chain}\n            showAllWallets={props.showAllWallets}\n            diableSelectionDataReset={props.disableSelectionDataReset}\n            disabled={props.meta.requireApproval && !approvedTOS}\n          />\n        );\n\n        bottomSection = (\n          <ScreenBottomContainer>{newToWallets}</ScreenBottomContainer>\n        );\n      }\n    }\n  }\n\n  // hide the header for embed - unless it's customized\n  const showHeader = !props.hideHeader || props.modalHeader;\n\n  return (\n    <Container\n      scrollY\n      flex=\"column\"\n      animate=\"fadein\"\n      fullHeight\n      style={{\n        maxHeight: props.size === \"compact\" ? compactModalMaxHeight : undefined,\n      }}\n    >\n      {/* Header */}\n      {showHeader && (\n        <Container p=\"lg\">\n          {isWalletGroupExpanded ? (\n            <ModalHeader\n              title={twTitle}\n              onBack={() => {\n                setIsWalletGroupExpanded(false);\n              }}\n            />\n          ) : (\n            twTitle\n          )}\n        </Container>\n      )}\n\n      {/* Body */}\n      <Container\n        expand\n        scrollY\n        px=\"md\"\n        style={\n          !showHeader\n            ? {\n                paddingTop: spacing.lg,\n              }\n            : {\n                paddingTop: \"2px\",\n              }\n        }\n      >\n        {!showHeader && isWalletGroupExpanded && (\n          <Container\n            flex=\"row\"\n            center=\"y\"\n            style={{\n              padding: spacing.sm,\n              paddingTop: 0,\n            }}\n          >\n            <IconButton\n              onClick={() => {\n                setIsWalletGroupExpanded(false);\n              }}\n              style={{\n                gap: spacing.xxs,\n                transform: `translateX(-${spacing.xs})`,\n                paddingBlock: spacing.xxs,\n                paddingRight: spacing.xs,\n              }}\n            >\n              <ChevronLeftIcon width={iconSize.sm} height={iconSize.sm} />\n              {props.connectLocale.goBackButton}\n            </IconButton>\n          </Container>\n        )}\n\n        {topSection}\n      </Container>\n\n      {bottomSection}\n      {isCompact && props.meta.showThirdwebBranding !== false && (\n        <Container py=\"md\">\n          <PoweredByThirdweb />\n        </Container>\n      )}\n    </Container>\n  );\n};\n\nlet _installedWallets: Wallet[] = [];\n\nfunction getInstalledWallets() {\n  if (_installedWallets.length === 0) {\n    const providers = getInstalledWalletProviders();\n    const walletIds = providers.map((provider) => provider.info.rdns);\n    _installedWallets = walletIds.map((w) =>\n      createWallet(w as InjectedSupportedWalletIds),\n    );\n  }\n\n  return _installedWallets;\n}\n\n/**\n * @internal\n */\nconst WalletSelection: React.FC<{\n  wallets: Wallet[];\n  selectWallet: (wallet: Wallet) => void;\n  maxHeight?: string;\n  done: (wallet: Wallet) => void;\n  goBack?: () => void;\n  onShowAll?: () => void;\n  recommendedWallets: Wallet[] | undefined;\n  showAllWallets: boolean | undefined;\n  size: \"compact\" | \"wide\";\n  connectLocale: ConnectLocale;\n  client: ThirdwebClient;\n  chain: Chain | undefined;\n  diableSelectionDataReset?: boolean;\n  // If true, all options will be disabled. Used for things like requiring TOS approval.\n  disabled?: boolean;\n}> = (props) => {\n  const wallets = sortWallets(props.wallets, props.recommendedWallets);\n  const { screen } = useScreenContext();\n  const setSelectionData = useSetSelectionData();\n  return (\n    <WalletList\n      style={{\n        minHeight: \"100%\",\n        maxHeight: \"370px\",\n      }}\n    >\n      {wallets.map((wallet) => {\n        const isActive = screen\n          ? typeof screen === \"object\" && screen.id === wallet.id\n          : false;\n        return (\n          <li\n            key={wallet.id}\n            // data-full-width={!!walletConfig.selectUI}\n          >\n            {wallet.id === \"inApp\" && props.size === \"compact\" ? (\n              <Suspense fallback={<LoadingScreen height=\"195px\" />}>\n                <InAppWalletSelectionUI\n                  done={() => props.done(wallet)}\n                  select={() => props.selectWallet(wallet)}\n                  wallet={wallet as Wallet<\"inApp\">}\n                  goBack={props.goBack}\n                  client={props.client}\n                  connectLocale={props.connectLocale}\n                  size={props.size}\n                  recommendedWallets={props.recommendedWallets}\n                  chain={props.chain}\n                  disabled={props.disabled}\n                />\n              </Suspense>\n            ) : (\n              <WalletEntryButton\n                walletId={wallet.id}\n                selectWallet={() => {\n                  if (!props.diableSelectionDataReset) {\n                    setSelectionData({});\n                  }\n                  props.selectWallet(wallet);\n                }}\n                connectLocale={props.connectLocale}\n                client={props.client}\n                recommendedWallets={props.recommendedWallets}\n                isActive={isActive}\n                badge={undefined}\n              />\n            )}\n          </li>\n        );\n      })}\n\n      {props.onShowAll && props.showAllWallets !== false && (\n        <ButtonContainer>\n          <WalletButtonEl onClick={props.onShowAll}>\n            <ShowAllWalletsIcon>\n              <div data-dot />\n              <div data-dot />\n              <div data-dot />\n              <div data-dot />\n            </ShowAllWalletsIcon>\n            <Container flex=\"row\" gap=\"xs\">\n              <Text color=\"primaryText\">All Wallets</Text>\n              <BadgeText> 350+ </BadgeText>\n            </Container>\n          </WalletButtonEl>\n        </ButtonContainer>\n      )}\n    </WalletList>\n  );\n};\n\nconst BadgeText = /* @__PURE__ */ StyledDiv(() => {\n  const theme = useCustomTheme();\n  return {\n    backgroundColor: theme.colors.secondaryButtonBg,\n    paddingBlock: \"3px\",\n    paddingInline: spacing.xxs,\n    fontSize: fontSize.xs,\n    borderRadius: radius.sm,\n    color: theme.colors.secondaryText,\n  };\n});\n\nconst ButtonContainer = /* @__PURE__ */ StyledDiv(() => {\n  const theme = useCustomTheme();\n  return {\n    \"&:hover [data-dot]\": {\n      background: theme.colors.primaryText,\n    },\n  };\n});\n\nconst ShowAllWalletsIcon = /* @__PURE__ */ StyledDiv(() => {\n  const theme = useCustomTheme();\n  return {\n    width: `${iconSize.xl}px`,\n    height: `${iconSize.xl}px`,\n    backgroundColor: theme.colors.tertiaryBg,\n    border: `2px solid ${theme.colors.borderColor}`,\n    borderRadius: radius.md,\n    display: \"grid\",\n    gridTemplateColumns: \"1fr 1fr\",\n    justifyItems: \"center\",\n    alignItems: \"center\",\n    padding: spacing.xs,\n    \"& div\": {\n      transition: \"background 200ms ease\",\n      background: theme.colors.secondaryText,\n      borderRadius: \"50%\",\n      width: \"10px\",\n      height: \"10px\",\n    },\n  };\n});\n\nconst WalletList = /* @__PURE__ */ StyledUl({\n  all: \"unset\",\n  listStyleType: \"none\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  gap: \"2px\",\n  boxSizing: \"border-box\",\n  overflowY: \"auto\",\n  flex: 1,\n  ...noScrollBar,\n  // to show the box-shadow of inputs that overflows\n  padding: \"2px\",\n  margin: \"-2px\",\n  marginBottom: 0,\n  paddingBottom: spacing.lg,\n});\n\nconst GradientDiv = /* @__PURE__ */ StyledDiv((_) => {\n  const theme = useCustomTheme();\n  theme.colors.modalBg;\n  return {\n    height: spacing.lg,\n    position: \"absolute\",\n    top: `-${spacing.lg}`,\n    left: 0,\n    width: \"100%\",\n    background: `linear-gradient(to bottom, transparent 0%, ${theme.colors.modalBg} 80%)`,\n    pointerEvents: \"none\",\n  };\n});\n", "\"use client\";\nimport { ExclamationTriangleIcon } from \"@radix-ui/react-icons\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\nimport type { SmartWalletOptions } from \"../../../../../wallets/smart/types.js\";\nimport type { WalletInfo } from \"../../../../../wallets/wallet-info.js\";\nimport {\n  fontSize,\n  iconSize,\n  spacing,\n} from \"../../../../core/design-system/index.js\";\nimport { useConnectionManager } from \"../../../../core/providers/connection-manager.js\";\nimport { useWalletInfo } from \"../../../../core/utils/wallet.js\";\nimport { LoadingScreen } from \"../../../wallets/shared/LoadingScreen.js\";\nimport { getSmartWalletLocale } from \"../../../wallets/smartWallet/locale/getSmartWalletLocale.js\";\nimport type { SmartWalletLocale } from \"../../../wallets/smartWallet/locale/types.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Spinner } from \"../../components/Spinner.js\";\nimport { Container, ModalHeader } from \"../../components/basic.js\";\nimport { Button } from \"../../components/buttons.js\";\nimport { Text } from \"../../components/text.js\";\nimport type { LocaleId } from \"../../types.js\";\nimport type { ConnectLocale } from \"../locale/types.js\";\nimport { AnyWalletConnectUI } from \"./AnyWalletConnectUI.js\";\n\n/**\n * @internal\n */\nexport function SmartConnectUI(props: {\n  personalWallet: Wallet;\n  done: (smartWallet: Wallet) => void;\n  onBack?: () => void;\n  accountAbstraction: SmartWalletOptions;\n  setModalVisibility: (value: boolean) => void;\n  meta: {\n    title?: string;\n    titleIconUrl?: string;\n    showThirdwebBranding?: boolean;\n    termsOfServiceUrl?: string;\n    privacyPolicyUrl?: string;\n  };\n  size: \"compact\" | \"wide\";\n  client: ThirdwebClient;\n  chain: Chain | undefined;\n  chains: Chain[] | undefined;\n  connectLocale: ConnectLocale;\n  walletConnect:\n    | {\n        projectId?: string;\n      }\n    | undefined;\n}) {\n  const personalWalletInfo = useWalletInfo(props.personalWallet.id);\n  const [keyConnected, setKeyConnected] = useState(false);\n\n  if (!personalWalletInfo.data) {\n    return <LoadingScreen />;\n  }\n\n  // connect personal wallet\n  if (!keyConnected) {\n    return (\n      <AnyWalletConnectUI\n        wallet={props.personalWallet}\n        done={() => {\n          setKeyConnected(true);\n        }}\n        onBack={props.onBack}\n        setModalVisibility={props.setModalVisibility}\n        chain={props.chain}\n        chains={props.chains}\n        client={props.client}\n        meta={props.meta}\n        size={props.size}\n        walletConnect={props.walletConnect}\n        connectLocale={props.connectLocale}\n      />\n    );\n  }\n\n  return (\n    <SmartWalletConnecting\n      done={props.done}\n      personalWallet={props.personalWallet}\n      accountAbstraction={props.accountAbstraction}\n      onBack={props.onBack}\n      personalWalletInfo={personalWalletInfo.data}\n      localeId={props.connectLocale.id}\n      size={props.size}\n      client={props.client}\n    />\n  );\n}\n\nfunction SmartWalletConnecting(props: {\n  done: (smartWallet: Wallet) => void;\n  personalWallet: Wallet;\n  accountAbstraction: SmartWalletOptions;\n  onBack?: () => void;\n  personalWalletInfo: WalletInfo;\n  localeId: LocaleId;\n  size: \"compact\" | \"wide\";\n  client: ThirdwebClient;\n}) {\n  const localeQuery = useQuery<SmartWalletLocale>({\n    queryKey: [\"getSmartWalletLocale\", props.localeId],\n    queryFn: () => getSmartWalletLocale(props.localeId),\n  });\n  const { chain: smartWalletChain } = props.accountAbstraction;\n\n  const { personalWallet } = props;\n  const { done } = props;\n\n  const [personalWalletChainId, setPersonalWalletChainId] = useState<\n    number | undefined\n  >(personalWallet.getChain()?.id);\n\n  useEffect(() => {\n    const unsubChainChanged = personalWallet.subscribe(\n      \"chainChanged\",\n      (chain) => setPersonalWalletChainId(chain.id),\n    );\n\n    return () => {\n      unsubChainChanged();\n    };\n  }, [personalWallet]);\n\n  const wrongNetwork = personalWalletChainId !== smartWalletChain.id;\n\n  const [smartWalletConnectionStatus, setSmartWalletConnectionStatus] =\n    useState<\"connecting\" | \"connect-error\" | \"idle\">(\"idle\");\n  const [personalWalletChainSwitchStatus, setPersonalWalletChainSwitchStatus] =\n    useState<\"switching\" | \"switch-error\" | \"idle\">(\"idle\");\n  const connectionManager = useConnectionManager();\n\n  const handleConnect = useCallback(async () => {\n    if (!personalWallet) {\n      throw new Error(\"No personal wallet\");\n    }\n\n    setSmartWalletConnectionStatus(\"connecting\");\n\n    try {\n      const connected = await connectionManager.handleConnection(\n        personalWallet,\n        {\n          accountAbstraction: props.accountAbstraction,\n          client: props.client,\n        },\n      );\n      done(connected);\n      setSmartWalletConnectionStatus(\"idle\");\n    } catch (e) {\n      console.error(e);\n      setSmartWalletConnectionStatus(\"connect-error\");\n    }\n  }, [\n    done,\n    personalWallet,\n    props.client,\n    props.accountAbstraction,\n    connectionManager,\n  ]);\n\n  const connectStarted = useRef(false);\n  useEffect(() => {\n    if (!wrongNetwork && !connectStarted.current) {\n      handleConnect();\n      connectStarted.current = true;\n    }\n  }, [handleConnect, wrongNetwork]);\n\n  if (!localeQuery.data) {\n    return <LoadingScreen />;\n  }\n\n  if (wrongNetwork) {\n    return (\n      <Container fullHeight animate=\"fadein\" flex=\"column\">\n        <Container p=\"lg\">\n          <ModalHeader\n            title={props.personalWalletInfo.name}\n            onBack={props.onBack}\n          />\n        </Container>\n\n        {props.size === \"compact\" && <Spacer y=\"lg\" />}\n\n        <Container expand flex=\"column\" center=\"both\" p=\"lg\">\n          <Container p={props.size === \"wide\" ? \"lg\" : undefined}>\n            <Container flex=\"row\" center=\"x\" color=\"danger\">\n              <ExclamationTriangleIcon\n                width={iconSize.lg}\n                height={iconSize.lg}\n              />\n            </Container>\n\n            <Spacer y=\"md\" />\n\n            <Text size=\"lg\" color=\"primaryText\" center weight={500}>\n              {localeQuery.data.wrongNetworkScreen.title}\n            </Text>\n\n            <Spacer y=\"lg\" />\n\n            <Text multiline center>\n              {localeQuery.data.wrongNetworkScreen.subtitle}\n            </Text>\n\n            <Spacer y=\"xl\" />\n\n            <Container flex=\"column\" gap=\"md\">\n              <Button\n                type=\"button\"\n                fullWidth\n                variant=\"accent\"\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  gap: spacing.sm,\n                }}\n                onClick={async () => {\n                  if (!personalWallet.switchChain) {\n                    setPersonalWalletChainSwitchStatus(\"switch-error\");\n                    throw new Error(\"No switchChain method\");\n                  }\n\n                  try {\n                    setPersonalWalletChainSwitchStatus(\"switching\");\n                    await personalWallet.switchChain(smartWalletChain);\n                    const newChain = personalWallet.getChain();\n                    if (newChain) {\n                      setPersonalWalletChainId(newChain.id);\n                    }\n                    setPersonalWalletChainSwitchStatus(\"idle\");\n                  } catch (e) {\n                    console.error(e);\n                    setPersonalWalletChainSwitchStatus(\"switch-error\");\n                  }\n                }}\n              >\n                {personalWalletChainSwitchStatus === \"switching\"\n                  ? \"Switching\"\n                  : \"Switch Network\"}\n                {personalWalletChainSwitchStatus === \"switching\" && (\n                  <Spinner size=\"sm\" color=\"accentButtonText\" />\n                )}\n              </Button>\n\n              <Container\n                flex=\"row\"\n                gap=\"sm\"\n                center=\"both\"\n                color=\"danger\"\n                style={{\n                  textAlign: \"center\",\n                  fontSize: fontSize.sm,\n                  opacity:\n                    personalWalletChainSwitchStatus === \"switch-error\" ? 1 : 0,\n                  transition: \"opacity 200ms ease\",\n                }}\n              >\n                <ExclamationTriangleIcon\n                  width={iconSize.sm}\n                  height={iconSize.sm}\n                />\n                <span>\n                  {localeQuery.data.wrongNetworkScreen.failedToSwitch}\n                </span>\n              </Container>\n            </Container>\n          </Container>\n        </Container>\n      </Container>\n    );\n  }\n\n  if (smartWalletConnectionStatus === \"connect-error\") {\n    return (\n      <Container\n        fullHeight\n        animate=\"fadein\"\n        flex=\"column\"\n        center=\"both\"\n        p=\"lg\"\n        style={{\n          minHeight: \"300px\",\n        }}\n      >\n        <Text color=\"danger\">{localeQuery.data.failedToConnect}</Text>\n      </Container>\n    );\n  }\n\n  return (\n    <Container\n      fullHeight\n      flex=\"column\"\n      center=\"both\"\n      style={{\n        minHeight: \"300px\",\n      }}\n    >\n      <Text color=\"primaryText\" multiline center>\n        {localeQuery.data.connecting}\n      </Text>\n      <Spacer y=\"lg\" />\n      <Spinner color=\"accentText\" size=\"lg\" />\n    </Container>\n  );\n}\n", "import type { LocaleId } from \"../../../ui/types.js\";\nimport type { SmartWalletLocale } from \"./types.js\";\n\n/**\n * @internal\n */\nexport async function getSmartWalletLocale(\n  localeId: LocaleId,\n): Promise<SmartWalletLocale> {\n  switch (localeId) {\n    case \"es_ES\":\n      return (await import(\"./es.js\")).default;\n    case \"ja_JP\":\n      return (await import(\"./ja.js\")).default;\n    case \"tl_PH\":\n      return (await import(\"./tl.js\")).default;\n    case \"vi_VN\":\n      return (await import(\"./vi.js\")).default;\n    case \"de_DE\":\n      return (await import(\"./de.js\")).default;\n    case \"ko_KR\":\n      return (await import(\"./kr.js\")).default;\n    case \"fr_FR\":\n      return (await import(\"./fr.js\")).default;\n    default:\n      return (await import(\"./en.js\")).default;\n  }\n}\n", "\"use client\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Suspense, lazy, useState } from \"react\";\nimport type { Chain } from \"../../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport { isMobile } from \"../../../../../utils/web/isMobile.js\";\nimport type {\n  DeepLinkSupportedWalletIds,\n  InjectedSupportedWalletIds,\n  WCSupportedWalletIds,\n} from \"../../../../../wallets/__generated__/wallet-ids.js\";\nimport { isEcosystemWallet } from \"../../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\nimport { getInstalledWalletProviders } from \"../../../../../wallets/injected/mipdStore.js\";\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\nimport type { EcosystemWalletId } from \"../../../../../wallets/wallet-types.js\";\nimport { iconSize } from \"../../../../core/design-system/index.js\";\nimport { useWalletInfo } from \"../../../../core/utils/wallet.js\";\nimport { getInjectedWalletLocale } from \"../../../wallets/injected/locale/getInjectedWalletLocale.js\";\nimport { GetStartedScreen } from \"../../../wallets/shared/GetStartedScreen.js\";\nimport { LoadingScreen } from \"../../../wallets/shared/LoadingScreen.js\";\nimport {\n  WalletConnectConnection,\n  WalletConnectStandaloneConnection,\n} from \"../../../wallets/shared/WalletConnectConnection.js\";\nimport { Spacer } from \"../../components/Spacer.js\";\nimport { Container, ModalHeader } from \"../../components/basic.js\";\nimport { Text } from \"../../components/text.js\";\nimport { AccentFailIcon } from \"../icons/AccentFailIcon.js\";\nimport type { ConnectLocale } from \"../locale/types.js\";\nimport { DeepLinkConnectUI } from \"./DeepLinkConnectUI.js\";\nimport { InjectedConnectUI } from \"./InjectedConnectUI.js\";\n\nconst CoinbaseSDKWalletConnectUI = /* @__PURE__ */ lazy(\n  () => import(\"../../../wallets/shared/CoinbaseSDKConnection.js\"),\n);\nconst InAppWalletConnectUI = /* @__PURE__ */ lazy(\n  () => import(\"../../../wallets/in-app/InAppWalletConnectUI.js\"),\n);\nconst EcosystemWalletConnectUI = /* @__PURE__ */ lazy(\n  () => import(\"../../../wallets/ecosystem/EcosystemWalletConnectUI.js\"),\n);\n\n/**\n * @internal\n */\nexport function AnyWalletConnectUI(props: {\n  wallet: Wallet;\n  done: () => void;\n  onBack?: () => void;\n  setModalVisibility: (value: boolean) => void;\n  chain: Chain | undefined;\n  chains: Chain[] | undefined;\n  client: ThirdwebClient;\n  size: \"compact\" | \"wide\";\n  meta: {\n    title?: string;\n    titleIconUrl?: string;\n    showThirdwebBranding?: boolean;\n    termsOfServiceUrl?: string;\n    privacyPolicyUrl?: string;\n    requireApproval?: boolean;\n  };\n  walletConnect:\n    | {\n        projectId?: string;\n      }\n    | undefined;\n  connectLocale: ConnectLocale;\n}) {\n  const [screen, setScreen] = useState<\"main\" | \"get-started\">(\"main\");\n  const { wallet } = props;\n  const walletInfo = useWalletInfo(props.wallet.id);\n\n  const localeId = props.connectLocale.id;\n  const localeFnQuery = useQuery({\n    queryKey: [\"injectedWalletLocale\", localeId, walletInfo.data?.name],\n    queryFn: async () => {\n      return getInjectedWalletLocale(localeId);\n    },\n    refetchOnWindowFocus: false,\n    refetchOnMount: false,\n  });\n\n  if (walletInfo.isLoading || !localeFnQuery.data) {\n    return <LoadingScreen />;\n  }\n\n  const localeFn = localeFnQuery.data;\n\n  if (!walletInfo.data) {\n    const injectedProvider = getInstalledWalletProviders().find(\n      (w) => w.info.rdns === wallet.id,\n    );\n\n    // Unknown wallet id but it's injected\n    if (injectedProvider) {\n      return (\n        <InjectedConnectUI\n          wallet={props.wallet as Wallet<InjectedSupportedWalletIds>}\n          walletName={injectedProvider.info.name}\n          done={props.done}\n          locale={localeFn(injectedProvider.info.name)}\n          onBack={props.onBack}\n          chain={props.chain}\n          client={props.client}\n          size={props.size}\n        />\n      );\n    }\n\n    // This will only happen if developer passes a wallet with unknown id and it's not injected\n    // Adding a fallback UI just in case\n    return (\n      <Container animate=\"fadein\" fullHeight flex=\"column\">\n        <Container p=\"lg\">\n          <ModalHeader title=\"Not Supported\" onBack={props.onBack} />\n        </Container>\n        <Container\n          flex=\"column\"\n          expand\n          center=\"both\"\n          p=\"lg\"\n          style={{\n            minHeight: \"300px\",\n          }}\n        >\n          <AccentFailIcon size={iconSize[\"3xl\"]} />\n          <Spacer y=\"lg\" />\n          <Text color=\"primaryText\" center>\n            Wallet is not supported\n          </Text>\n          <Spacer y=\"xxl\" />\n        </Container>\n      </Container>\n    );\n  }\n\n  const locale = localeFn(walletInfo.data.name);\n\n  // if wallet can connect to injected wallet + wallet is injected\n  const isInstalled = getInstalledWalletProviders().find(\n    (w) => w.info.rdns === walletInfo.data.rdns,\n  );\n\n  if (screen === \"get-started\") {\n    return (\n      <GetStartedScreen\n        locale={locale}\n        wallet={props.wallet}\n        walletInfo={walletInfo.data}\n        onBack={() => {\n          setScreen(\"main\");\n        }}\n        client={props.client}\n      />\n    );\n  }\n\n  if (\n    walletInfo.data.deepLink &&\n    !isInstalled &&\n    (wallet as Wallet<DeepLinkSupportedWalletIds>).getConfig()\n      ?.preferDeepLink &&\n    isMobile()\n  ) {\n    return (\n      <DeepLinkConnectUI\n        wallet={props.wallet as Wallet<InjectedSupportedWalletIds>}\n        walletInfo={walletInfo.data}\n        deepLinkPrefix={walletInfo.data.deepLink.mobile}\n        locale={locale}\n        onGetStarted={() => {\n          setScreen(\"get-started\");\n        }}\n        onBack={props.onBack}\n        client={props.client}\n      />\n    );\n  }\n\n  if (walletInfo.data.rdns && isInstalled) {\n    return (\n      <InjectedConnectUI\n        wallet={props.wallet as Wallet<InjectedSupportedWalletIds>}\n        walletName={walletInfo.data.name}\n        done={props.done}\n        locale={locale}\n        onGetStarted={() => {\n          setScreen(\"get-started\");\n        }}\n        onBack={props.onBack}\n        chain={props.chain}\n        client={props.client}\n        size={props.size}\n      />\n    );\n  }\n\n  // wallet connect\n  if (walletInfo.data.mobile.native || walletInfo.data.mobile.universal) {\n    return (\n      <WalletConnectConnection\n        locale={locale}\n        onGetStarted={() => {\n          setScreen(\"get-started\");\n        }}\n        onBack={props.onBack}\n        done={props.done}\n        wallet={props.wallet as Wallet<WCSupportedWalletIds>}\n        walletInfo={walletInfo.data}\n        chain={props.chain}\n        chains={props.chains}\n        client={props.client}\n        size={props.size}\n        walletConnect={props.walletConnect}\n      />\n    );\n  }\n\n  // wallet connect\n  if (props.wallet.id === \"walletConnect\") {\n    return (\n      <WalletConnectStandaloneConnection\n        locale={locale}\n        onBack={props.onBack}\n        done={props.done}\n        wallet={props.wallet as Wallet<\"walletConnect\">}\n        walletInfo={walletInfo.data}\n        setModalVisibility={props.setModalVisibility}\n        chain={props.chain}\n        chains={props.chains}\n        client={props.client}\n        size={props.size}\n        walletConnect={props.walletConnect}\n      />\n    );\n  }\n\n  if (props.wallet.id === \"inApp\" || props.wallet.id === \"embedded\") {\n    return (\n      <Suspense fallback={<LoadingScreen />}>\n        <InAppWalletConnectUI\n          wallet={props.wallet as Wallet<\"inApp\">}\n          done={props.done}\n          goBack={props.onBack}\n          chain={props.chain}\n          client={props.client}\n          size={props.size}\n          walletConnect={props.walletConnect}\n          connectLocale={props.connectLocale}\n          meta={props.meta}\n        />\n      </Suspense>\n    );\n  }\n\n  if (isEcosystemWallet(props.wallet.id)) {\n    return (\n      <Suspense fallback={<LoadingScreen />}>\n        <EcosystemWalletConnectUI\n          wallet={props.wallet as Wallet<EcosystemWalletId>}\n          done={props.done}\n          goBack={props.onBack}\n          chain={props.chain}\n          client={props.client}\n          size={props.size}\n          meta={props.meta}\n          walletConnect={props.walletConnect}\n          connectLocale={props.connectLocale}\n        />\n      </Suspense>\n    );\n  }\n\n  // any other known wallet\n  if (props.wallet.id) {\n    return (\n      <Suspense fallback={<LoadingScreen />}>\n        <CoinbaseSDKWalletConnectUI\n          locale={locale}\n          onGetStarted={() => {\n            setScreen(\"get-started\");\n          }}\n          onBack={props.onBack}\n          done={props.done}\n          wallet={props.wallet}\n          walletInfo={walletInfo.data}\n          chain={props.chain}\n          client={props.client}\n          size={props.size}\n        />\n      </Suspense>\n    );\n  }\n\n  // if can't connect in any way - show get started screen\n  return (\n    <GetStartedScreen\n      locale={locale}\n      wallet={props.wallet}\n      walletInfo={walletInfo.data}\n      onBack={props.onBack}\n      client={props.client}\n    />\n  );\n}\n", "import type { LocaleId } from \"../../../ui/types.js\";\nimport type { InjectedWalletLocale } from \"./types.js\";\n\n/**\n * @internal\n */\nexport async function getInjectedWalletLocale(\n  locale: LocaleId,\n): Promise<(walletName: string) => InjectedWalletLocale> {\n  switch (locale) {\n    case \"es_ES\":\n      return (await import(\"./es.js\")).default;\n    case \"ja_JP\":\n      return (await import(\"./ja.js\")).default;\n    case \"tl_PH\":\n      return (await import(\"./tl.js\")).default;\n    case \"vi_VN\":\n      return (await import(\"./vi.js\")).default;\n    case \"de_DE\":\n      return (await import(\"./de.js\")).default;\n    case \"ko_KR\":\n      return (await import(\"./kr.js\")).default;\n    case \"fr_FR\":\n      return (await import(\"./fr.js\")).default;\n    default:\n      return (await import(\"./en.js\")).default;\n  }\n}\n", "import { useState } from \"react\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { isMobile } from \"../../../../utils/web/isMobile.js\";\nimport { openWindow } from \"../../../../utils/web/openWindow.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport type { WalletInfo } from \"../../../../wallets/wallet-info.js\";\nimport type { WalletId } from \"../../../../wallets/wallet-types.js\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport {\n  iconSize,\n  radius,\n  spacing,\n} from \"../../../core/design-system/index.js\";\nimport { AppleIcon } from \"../../ui/ConnectWallet/icons/AppleIcon.js\";\nimport { ChromeIcon } from \"../../ui/ConnectWallet/icons/ChromeIcon.js\";\nimport { PlayStoreIcon } from \"../../ui/ConnectWallet/icons/PlayStoreIcon.js\";\nimport { QRCode } from \"../../ui/components/QRCode.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { WalletImage } from \"../../ui/components/WalletImage.js\";\nimport { Container, ModalHeader } from \"../../ui/components/basic.js\";\nimport { Text } from \"../../ui/components/text.js\";\nimport { StyledButton } from \"../../ui/design-system/elements.js\";\nimport type { InjectedWalletLocale } from \"../injected/locale/types.js\";\n\n/**\n * @internal\n */\nexport const GetStartedScreen: React.FC<{\n  onBack?: () => void;\n  wallet: Wallet;\n  walletInfo: WalletInfo;\n  header?: React.ReactNode;\n  footer?: React.ReactNode;\n  showBack?: boolean;\n  locale: InjectedWalletLocale;\n  client: ThirdwebClient;\n}> = ({ wallet, walletInfo, header, footer, onBack, locale, client }) => {\n  const [showScreen, setShowScreen] = useState<\n    \"base\" | \"android-scan\" | \"ios-scan\"\n  >(\"base\");\n\n  const isScanScreen =\n    showScreen === \"android-scan\" || showScreen === \"ios-scan\";\n\n  const handleBack = onBack\n    ? () => {\n        if (showScreen === \"base\") {\n          onBack();\n        } else {\n          setShowScreen(\"base\");\n        }\n      }\n    : undefined;\n\n  return (\n    <Container fullHeight flex=\"column\" animate=\"fadein\">\n      <Container expand flex=\"column\" p=\"lg\">\n        {showScreen === \"android-scan\" && walletInfo.app.android && (\n          <InstallScanScreen\n            platformIcon={<PlayStoreIcon size={iconSize.md} />}\n            url={walletInfo.app.android}\n            platform=\"Google Play\"\n            walletName={walletInfo.name}\n            walletId={wallet.id}\n            onBack={handleBack}\n            locale={{\n              scanToDownload: locale.getStartedScreen.instruction,\n            }}\n            client={client}\n          />\n        )}\n\n        {showScreen === \"ios-scan\" && walletInfo.app.ios && (\n          <InstallScanScreen\n            platformIcon={<AppleIcon size={iconSize.md} />}\n            url={walletInfo.app.ios}\n            platform=\"App Store\"\n            walletName={walletInfo.name}\n            walletId={wallet.id}\n            onBack={handleBack}\n            locale={{\n              scanToDownload: locale.getStartedScreen.instruction,\n            }}\n            client={client}\n          />\n        )}\n\n        {showScreen === \"base\" && (\n          <Container expand flex=\"column\">\n            {header || (\n              <ModalHeader onBack={handleBack} title={walletInfo.name} />\n            )}\n            <Spacer y=\"xl\" />\n\n            <Container\n              expand\n              animate=\"fadein\"\n              flex=\"column\"\n              center=\"y\"\n              style={{\n                minHeight: \"250px\",\n              }}\n            >\n              <Container flex=\"column\" gap=\"xs\">\n                {/* Chrome Extension  */}\n                {walletInfo.app.chrome && (\n                  <ButtonLink\n                    onClick={() => {\n                      openWindow(walletInfo.app.chrome || \"\");\n                    }}\n                  >\n                    <ChromeIcon size={iconSize.lg} />\n                    <span>{locale.download.chrome}</span>\n                  </ButtonLink>\n                )}\n\n                {/* Google Play store  */}\n                {walletInfo.app.android && (\n                  <ButtonLink\n                    as=\"button\"\n                    onClick={() => {\n                      if (isMobile()) {\n                        openWindow(walletInfo.app.android || \"\");\n                      } else {\n                        setShowScreen(\"android-scan\");\n                      }\n                    }}\n                  >\n                    <PlayStoreIcon size={iconSize.lg} />\n                    <span>{locale.download.android}</span>\n                  </ButtonLink>\n                )}\n\n                {/* App Store  */}\n                {walletInfo.app.ios && (\n                  <ButtonLink\n                    as=\"button\"\n                    onClick={() => {\n                      if (isMobile()) {\n                        openWindow(walletInfo.app.ios || \"\");\n                      } else {\n                        setShowScreen(\"ios-scan\");\n                      }\n                    }}\n                  >\n                    <AppleIcon size={iconSize.lg} />\n                    <span>{locale.download.iOS}</span>\n                  </ButtonLink>\n                )}\n              </Container>\n            </Container>\n          </Container>\n        )}\n\n        {!isScanScreen && footer}\n      </Container>\n    </Container>\n  );\n};\n\n/**\n * @internal\n */\nconst InstallScanScreen: React.FC<{\n  url: string;\n  platform: string;\n  walletName: string;\n  platformIcon: React.ReactNode;\n  walletId: WalletId;\n  onBack?: () => void;\n  locale: {\n    scanToDownload: string;\n  };\n  client: ThirdwebClient;\n}> = (props) => {\n  return (\n    <Container animate=\"fadein\" expand>\n      <ModalHeader title={props.walletName} onBack={props.onBack} />\n      <Spacer y=\"xl\" />\n\n      <Container\n        flex=\"column\"\n        expand\n        center=\"both\"\n        style={{\n          textAlign: \"center\",\n        }}\n      >\n        <QRCode\n          qrCodeUri={props.url}\n          QRIcon={\n            <WalletImage\n              id={props.walletId}\n              size={iconSize.xxl}\n              client={props.client}\n            />\n          }\n        />\n\n        <Spacer y=\"xl\" />\n\n        <Text multiline center balance>\n          {props.locale.scanToDownload}\n        </Text>\n\n        <Spacer y=\"xs\" />\n      </Container>\n    </Container>\n  );\n};\n\nconst ButtonLink = /* @__PURE__ */ StyledButton((_) => {\n  const theme = useCustomTheme();\n  return {\n    all: \"unset\",\n    textDecoration: \"none\",\n    padding: `${spacing.sm} ${spacing.md}`,\n    borderRadius: radius.sm,\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: spacing.md,\n    cursor: \"pointer\",\n    boxSizing: \"border-box\",\n    width: \"100%\",\n    fontWeight: 500,\n    color: theme.colors.secondaryButtonText,\n    background: theme.colors.secondaryButtonBg,\n    transition: \"100ms ease\",\n    \"&:hover\": {\n      background: theme.colors.secondaryButtonHoverBg,\n      textDecoration: \"none\",\n      color: theme.colors.primaryText,\n    },\n  };\n});\n", "import type { IconFC } from \"./types.js\";\n\n/**\n * @internal\n */\nexport const AppleIcon: IconFC = (props) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={props.size}\n      height={props.size}\n      viewBox=\"0 0 23 28\"\n      fill=\"none\"\n      role=\"presentation\"\n    >\n      <path\n        d=\"M22.4181 21.6041C22.008 22.5506 21.5224 23.422 20.9599 24.223C20.1931 25.3151 19.5652 26.0711 19.0814 26.4908C18.3313 27.1799 17.5277 27.5327 16.6671 27.5528C16.0493 27.5528 15.3043 27.3772 14.437 27.021C13.5669 26.6664 12.7673 26.4908 12.0362 26.4908C11.2694 26.4908 10.447 26.6664 9.56734 27.021C8.68636 27.3772 7.97665 27.5628 7.43403 27.5812C6.60879 27.6164 5.78624 27.2534 4.96519 26.4908C4.44116 26.0343 3.78569 25.2516 3.00047 24.1428C2.15799 22.9587 1.46536 21.5857 0.92274 20.0203C0.341611 18.3295 0.050293 16.6922 0.050293 15.1071C0.050293 13.2914 0.44307 11.7253 1.2298 10.413C1.84809 9.35886 2.67065 8.52734 3.70014 7.91691C4.72963 7.30648 5.84199 6.99541 7.03991 6.97551C7.69538 6.97551 8.55493 7.17804 9.6231 7.57607C10.6882 7.97544 11.3722 8.17797 11.672 8.17797C11.8962 8.17797 12.656 7.94116 13.944 7.46904C15.162 7.0312 16.19 6.84991 17.0321 6.92133C19.3141 7.10529 21.0285 8.00387 22.1687 9.62276C20.1278 10.858 19.1182 12.5881 19.1383 14.8076C19.1567 16.5363 19.7846 17.9749 21.0185 19.1172C21.5777 19.6473 22.2022 20.0571 22.897 20.3481C22.7463 20.7846 22.5872 21.2027 22.4181 21.6041ZM17.1845 1.03178C17.1845 2.38678 16.6889 3.65194 15.7011 4.82296C14.509 6.21507 13.0672 7.0195 11.5036 6.89256C11.4837 6.73 11.4721 6.55892 11.4721 6.37913C11.4721 5.07833 12.039 3.68622 13.0457 2.54798C13.5484 1.97167 14.1876 1.49247 14.9628 1.11021C15.7363 0.733653 16.4679 0.525407 17.156 0.489746C17.1761 0.670889 17.1845 0.85206 17.1845 1.03178Z\"\n        fill=\"#959CA0\"\n      />\n    </svg>\n  );\n};\n", "import type { IconFC } from \"./types.js\";\n\n/**\n * @internal\n */\nexport const ChromeIcon: IconFC = (props) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={props.size}\n      height={props.size}\n      viewBox=\"0 0 190.5 190.5\"\n      role=\"presentation\"\n    >\n      <g transform=\"translate(90.669 -507.469)\">\n        <path\n          d=\"M4.583 650.342c26.304 0 47.627-21.324 47.627-47.628s-21.323-47.628-47.627-47.628-47.627 21.324-47.627 47.628 21.323 47.628 47.627 47.628z\"\n          fill=\"#fff\"\n          clipPath=\"none\"\n          mask=\"none\"\n        />\n        <path\n          d=\"M-36.664 626.539l-41.24-71.43c-8.362 14.479-12.765 30.904-12.765 47.625s4.401 33.146 12.762 47.625 20.387 26.503 34.868 34.86 30.908 12.755 47.628 12.75l41.24-71.43v-.011c-4.177 7.244-10.188 13.26-17.428 17.443a47.62 47.62 0 0 1-47.632.007 47.62 47.62 0 0 1-17.433-17.437z\"\n          fill=\"#229342\"\n          clipPath=\"none\"\n          mask=\"none\"\n        />\n        <path\n          d=\"M45.826 626.536l-41.239 71.43c16.72.003 33.146-4.398 47.626-12.757s26.504-20.384 34.863-34.865a95.24 95.24 0 0 0 12.755-47.627c-.003-16.72-4.408-33.145-12.772-47.623H4.58l-.01.007a47.62 47.62 0 0 1 23.819 6.372c7.243 4.179 13.257 10.19 17.439 17.431a47.62 47.62 0 0 1-.001 47.633z\"\n          fill=\"#fbc116\"\n          clipPath=\"none\"\n          mask=\"none\"\n        />\n        <path\n          d=\"M4.583 640.43c20.824 0 37.705-16.881 37.705-37.706s-16.881-37.705-37.705-37.705-37.705 16.881-37.705 37.705 16.881 37.706 37.705 37.706z\"\n          fill=\"#1a73e8\"\n          clipPath=\"none\"\n          mask=\"none\"\n        />\n        <path\n          d=\"M4.583 555.097h82.479c-8.358-14.481-20.381-26.507-34.861-34.868a95.23 95.23 0 0 0-47.625-12.76c-16.72.001-33.145 4.404-47.623 12.767a95.23 95.23 0 0 0-34.856 34.872l41.24 71.43.011.006a47.62 47.62 0 0 1-.015-47.633c4.179-7.242 10.193-13.256 17.434-17.436s15.456-6.381 23.818-6.379z\"\n          fill=\"#e33b2e\"\n          clipPath=\"none\"\n          mask=\"none\"\n        />\n      </g>\n    </svg>\n  );\n};\n", "import type { IconFC } from \"./types.js\";\n\n/**\n * @internal\n */\nexport const PlayStoreIcon: IconFC = (props) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={props.size}\n      height={props.size}\n      viewBox=\"0 0 23 26\"\n      fill=\"none\"\n      role=\"presentation\"\n    >\n      <path\n        d=\"M10.5832 12.0978L0.0976562 23.2275C0.0980507 23.2298 0.0988382 23.2317 0.0992076 23.2341C0.420793 24.4427 1.52467 25.3326 2.83473 25.3326C3.35844 25.3326 3.85012 25.191 4.27179 24.9424L4.30528 24.9228L16.1087 18.1117L10.5838 12.0977\"\n        fill=\"#EB3131\"\n      />\n      <path\n        d=\"M21.1922 10.2046L21.1821 10.1977L16.0862 7.2435L10.345 12.3523L16.1061 18.1127L21.1752 15.1879C22.0639 14.7081 22.6672 13.7712 22.6672 12.6908C22.6672 11.6182 22.072 10.6859 21.1922 10.2046Z\"\n        fill=\"#F6B60B\"\n      />\n      <path\n        d=\"M0.0961678 2.10416C0.0331317 2.33661 0 2.58009 0 2.83292V22.5002C0 22.7526 0.0327407 22.9969 0.0965672 23.2285L10.9441 12.3832L0.0965672 2.10444\"\n        fill=\"#5778C5\"\n      />\n      <path\n        d=\"M10.6603 12.6667L16.088 7.24061L4.29785 0.404818C3.8693 0.148138 3.36912 0 2.83391 0C1.52384 0 0.418474 0.891502 0.0968301 2.10147C0.0964356 2.10265 0.0964355 2.10347 0.0964355 2.1045L10.6603 12.6669\"\n        fill=\"#3BAD49\"\n      />\n    </svg>\n  );\n};\n", "\"use client\";\nimport { keyframes } from \"@emotion/react\";\nimport type React from \"react\";\nimport { Suspense, lazy } from \"react\";\nimport { useCustomTheme } from \"../../../core/design-system/CustomThemeProvider.js\";\nimport { radius } from \"../../../core/design-system/index.js\";\nimport { fadeInAnimation } from \"../design-system/animations.js\";\nimport { StyledDiv } from \"../design-system/elements.js\";\n\nconst QRCodeRenderer = /* @__PURE__ */ lazy(\n  () => import(\"./QRCode/QRCodeRenderer.js\"),\n);\n\n/**\n * @internal\n */\nexport const QRCode = (props: {\n  qrCodeUri?: string;\n  QRIcon?: React.ReactNode;\n  size?: number;\n}) => {\n  const size = props.size || 310;\n\n  const placeholder = (\n    <QRPlaceholder\n      style={{\n        width: `${size}px`,\n        height: `${size}px`,\n      }}\n    >\n      <span data-v1 />\n      <span data-v2 />\n      <span data-v3 />\n      <div />\n    </QRPlaceholder>\n  );\n\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        display: \"flex\",\n        justifyContent: \"center\",\n      }}\n    >\n      {props.qrCodeUri ? (\n        <Suspense fallback={placeholder}>\n          <QRCodeContainer>\n            <QRCodeRenderer\n              uri={props.qrCodeUri}\n              size={size + 20}\n              ecl=\"M\"\n              clearSize={props.QRIcon ? 70 : undefined}\n            />\n          </QRCodeContainer>\n        </Suspense>\n      ) : (\n        placeholder\n      )}\n\n      {props.QRIcon && <IconContainer>{props.QRIcon}</IconContainer>}\n    </div>\n  );\n};\n\nconst IconContainer = /* @__PURE__ */ StyledDiv({\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignContent: \"center\",\n  zIndex: 1000,\n});\n\nconst QRCodeContainer = /* @__PURE__ */ StyledDiv(() => {\n  const theme = useCustomTheme();\n  return {\n    animation: `${fadeInAnimation} 600ms ease`,\n    \"--ck-qr-dot-color\": theme.colors.primaryText,\n    \"--ck-body-background\": theme.colors.modalBg,\n    \"--ck-qr-background\": theme.colors.modalBg,\n  };\n});\n\nconst PlaceholderKeyframes = keyframes`\n  0%{ background-position: 100% 0; }\n  100%{ background-position: -100% 0; }\n`;\n\nconst QRPlaceholder = /* @__PURE__ */ StyledDiv((_) => {\n  const theme = useCustomTheme();\n  return {\n    \"--color\": theme.colors.skeletonBg,\n    \"--bg\": theme.colors.modalBg,\n    overflow: \"hidden\",\n    position: \"relative\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    borderRadius: radius.md,\n    \"> div\": {\n      zIndex: 4,\n      position: \"relative\",\n      width: \"28%\",\n      height: \"28%\",\n      borderRadius: \"5px\",\n      background: \"var(--bg)\",\n      boxShadow: \"0 0 0 7px var(--bg)\",\n    },\n    \"> span\": {\n      zIndex: 4,\n      position: \"absolute\",\n      background: \"var(--color)\",\n      borderRadius: \"12px\",\n      width: \"13.25%\",\n      height: \"13.25%\",\n      boxShadow: \"0 0 0 4px var(--bg)\",\n      \"&:before\": {\n        content: '\"\"',\n        position: \"absolute\",\n        inset: \"9px\",\n        borderRadius: \"3px\",\n        boxShadow: \"0 0 0 4px var(--bg)\",\n      },\n      \"&[data-v1]\": {\n        top: 0,\n        left: 0,\n      },\n      \"&[data-v2]\": {\n        top: 0,\n        right: 0,\n      },\n      \"&[data-v3]\": {\n        bottom: 0,\n        left: 0,\n      },\n    },\n    \"&:before\": {\n      zIndex: 3,\n      content: '\"\"',\n      position: \"absolute\",\n      inset: 0,\n      background: \"repeat\",\n      backgroundSize: \"1.888% 1.888%\",\n      backgroundImage: \"radial-gradient(var(--color) 41%, transparent 41%)\",\n    },\n    \"&::after\": {\n      zIndex: 100,\n      content: '\"\"',\n      position: \"absolute\",\n      inset: 0,\n      transform: \"scale(1.5) rotate(45deg)\",\n      background:\n        \"linear-gradient(90deg, transparent 50%, var(--color), transparent)\",\n      backgroundSize: \"200% 100%\",\n      animation: `${PlaceholderKeyframes} 1000ms linear infinite both`,\n    },\n  };\n});\n", "import { useCallback, useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport { wait } from \"../../../../utils/promise/wait.js\";\nimport { formatWalletConnectUrl } from \"../../../../utils/url.js\";\nimport { isAndroid, isIOS, isMobile } from \"../../../../utils/web/isMobile.js\";\nimport { openWindow } from \"../../../../utils/web/openWindow.js\";\nimport type { WCSupportedWalletIds } from \"../../../../wallets/__generated__/wallet-ids.js\";\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\nimport type { WalletInfo } from \"../../../../wallets/wallet-info.js\";\nimport type { InjectedWalletLocale } from \"../injected/locale/types.js\";\nimport { ConnectingScreen } from \"./ConnectingScreen.js\";\nimport { ScanScreen } from \"./ScanScreen.js\";\n\n/**\n * QR Scan UI for connecting a specific wallet on desktop.\n * shows a \"Connecting\" screen and opens the app on mobile.\n * @internal\n */\nexport const WalletConnectConnection: React.FC<{\n  onBack?: () => void;\n  onGetStarted: () => void;\n  locale: InjectedWalletLocale;\n  wallet: Wallet<WCSupportedWalletIds>;\n  walletInfo: WalletInfo;\n  done: () => void;\n  chain: Chain | undefined;\n  chains: Chain[] | undefined;\n  client: ThirdwebClient;\n  walletConnect:\n    | {\n        projectId?: string;\n      }\n    | undefined;\n  size: \"compact\" | \"wide\";\n}> = (props) => {\n  const { onBack, onGetStarted, wallet, walletInfo, locale, done } = props;\n  const [qrCodeUri, setQrCodeUri] = useState<string | undefined>();\n  const [errorConnecting, setErrorConnecting] = useState(false);\n\n  const connect = useCallback(() => {\n    setErrorConnecting(false);\n\n    wallet\n      .connect({\n        chain: props.chain,\n        client: props.client,\n        walletConnect: {\n          projectId: props.walletConnect?.projectId,\n          showQrModal: false,\n          onDisplayUri(uri) {\n            const preferNative =\n              walletInfo.mobile.native || walletInfo.mobile.universal;\n            try {\n              if (isMobile()) {\n                if (isAndroid()) {\n                  if (preferNative) {\n                    openWindow(\n                      formatWalletConnectUrl(preferNative, uri).redirect,\n                    );\n                  }\n                } else if (isIOS()) {\n                  if (preferNative) {\n                    openWindow(\n                      formatWalletConnectUrl(preferNative, uri).redirect,\n                    );\n                  }\n                } else {\n                  const preferUniversal =\n                    walletInfo.mobile.universal || walletInfo.mobile.native;\n                  if (preferUniversal) {\n                    openWindow(\n                      formatWalletConnectUrl(preferUniversal, uri).redirect,\n                    );\n                  }\n                }\n              } else {\n                setQrCodeUri(uri);\n              }\n            } catch {\n              setErrorConnecting(true);\n            }\n          },\n          optionalChains: props.chains,\n        },\n      })\n      .then(() => {\n        done();\n      })\n      .catch((e) => {\n        setErrorConnecting(true);\n        console.error(e);\n      });\n  }, [\n    props.walletConnect,\n    walletInfo.mobile.native,\n    walletInfo.mobile.universal,\n    wallet,\n    props.chain,\n    props.client,\n    props.chains,\n    done,\n  ]);\n\n  const scanStarted = useRef(false);\n  useEffect(() => {\n    if (scanStarted.current) {\n      return;\n    }\n    scanStarted.current = true;\n    connect();\n  }, [connect]);\n\n  if (isMobile()) {\n    return (\n      <ConnectingScreen\n        locale={{\n          getStartedLink: locale.getStartedLink,\n          instruction: locale.connectionScreen.instruction,\n          tryAgain: locale.connectionScreen.retry,\n          inProgress: locale.connectionScreen.inProgress,\n          failed: locale.connectionScreen.failed,\n        }}\n        onBack={onBack}\n        walletName={walletInfo.name}\n        walletId={wallet.id}\n        errorConnecting={errorConnecting}\n        onRetry={connect}\n        onGetStarted={onGetStarted}\n        client={props.client}\n        size={props.size}\n      />\n    );\n  }\n\n  return (\n    <ScanScreen\n      qrScanInstruction={locale.scanScreen.instruction}\n      onBack={onBack}\n      onGetStarted={onGetStarted}\n      qrCodeUri={qrCodeUri}\n      walletName={walletInfo.name}\n      walletId={wallet.id}\n      getStartedLink={locale.getStartedLink}\n      error={errorConnecting}\n      onRetry={connect}\n      client={props.client}\n      connectModalSize={props.size}\n    />\n  );\n};\n\n/**\n * QR Scan UI for connecting a specific wallet on desktop.\n * shows a \"Connecting\" screen and opens the app on mobile.\n * @internal\n */\nexport const WalletConnectStandaloneConnection: React.FC<{\n  onBack?: () => void;\n  locale: InjectedWalletLocale;\n  wallet: Wallet<\"walletConnect\">;\n  walletInfo: WalletInfo;\n  done: () => void;\n  setModalVisibility: (value: boolean) => void;\n  chain: Chain | undefined;\n  chains: Chain[] | undefined;\n  client: ThirdwebClient;\n  walletConnect:\n    | {\n        projectId?: string;\n      }\n    | undefined;\n  size: \"compact\" | \"wide\";\n}> = (props) => {\n  const { onBack, wallet, walletInfo, locale, done, setModalVisibility } =\n    props;\n  const [qrCodeUri, setQrCodeUri] = useState<string | undefined>();\n  const [errorConnecting, setErrorConnecting] = useState(false);\n\n  const connect = useCallback(() => {\n    setErrorConnecting(false);\n\n    if (isMobile()) {\n      let wcModalClosed = false;\n\n      // show spinner while the wallet connect modal loads in the background\n      wait(2000).then(() => {\n        // don't hide the modal if wc closed already\n        if (!wcModalClosed) {\n          setModalVisibility(false);\n        }\n      });\n\n      wallet\n        .connect({\n          chain: props.chain,\n          client: props.client,\n          projectId: props.walletConnect?.projectId,\n          showQrModal: true,\n          optionalChains: props.chains,\n        })\n        .then(() => {\n          wcModalClosed = true;\n          setModalVisibility(true);\n          done();\n        })\n        .catch((e) => {\n          wcModalClosed = true;\n          setModalVisibility(true);\n          setErrorConnecting(true);\n          console.error(e);\n        });\n    } else {\n      wallet\n        .connect({\n          chain: props.chain,\n          client: props.client,\n          projectId: props.walletConnect?.projectId,\n          showQrModal: false,\n          onDisplayUri(uri) {\n            const platformUris = {\n              ios: walletInfo.mobile.native || \"\",\n              android: walletInfo.mobile.universal || \"\",\n              other: walletInfo.mobile.universal || \"\",\n            };\n\n            setQrCodeUri(uri);\n            if (isMobile()) {\n              if (isAndroid()) {\n                openWindow(\n                  `${platformUris.android}wc?uri=${encodeURIComponent(uri)}`,\n                );\n              } else if (isIOS()) {\n                openWindow(\n                  `${platformUris.ios}wc?uri=${encodeURIComponent(uri)}`,\n                );\n              } else {\n                openWindow(\n                  `${platformUris.other}wc?uri=${encodeURIComponent(uri)}`,\n                );\n              }\n            }\n          },\n          optionalChains: props.chains,\n        })\n        .then(() => {\n          done();\n        })\n        .catch((e) => {\n          setErrorConnecting(true);\n          console.error(e);\n        });\n    }\n  }, [\n    props.walletConnect,\n    walletInfo.mobile.native,\n    walletInfo.mobile.universal,\n    wallet,\n    props.chain,\n    props.client,\n    props.chains,\n    done,\n    setModalVisibility,\n  ]);\n\n  const scanStarted = useRef(false);\n  useEffect(() => {\n    if (scanStarted.current) {\n      return;\n    }\n    scanStarted.current = true;\n    connect();\n  }, [connect]);\n\n  if (isMobile()) {\n    return (\n      <ConnectingScreen\n        locale={{\n          getStartedLink: locale.getStartedLink,\n          instruction: locale.connectionScreen.instruction,\n          tryAgain: locale.connectionScreen.retry,\n          inProgress: locale.connectionScreen.inProgress,\n          failed: locale.connectionScreen.failed,\n        }}\n        onBack={onBack}\n        walletName={walletInfo.name}\n        walletId={wallet.id}\n        errorConnecting={errorConnecting}\n        onRetry={connect}\n        client={props.client}\n        size={props.size}\n      />\n    );\n  }\n\n  return (\n    <ScanScreen\n      qrScanInstruction={locale.scanScreen.instruction}\n      onBack={onBack}\n      qrCodeUri={qrCodeUri}\n      walletName={walletInfo.name}\n      walletId={wallet.id}\n      getStartedLink={locale.getStartedLink}\n      error={errorConnecting}\n      onRetry={connect}\n      client={props.client}\n      connectModalSize={props.size}\n    />\n  );\n};\n", "/**\n * Waits for the specified number of milliseconds.\n * @param ms - The number of milliseconds to wait.\n * @returns A promise that resolves after the specified time.\n * @internal\n */\nexport function wait(ms: number): Promise<void> {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n", "\"use client\";\nimport { CheckIcon, CopyIcon } from \"@radix-ui/react-icons\";\nimport { useState } from \"react\";\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\nimport type { WalletId } from \"../../../../wallets/wallet-types.js\";\nimport {\n  fontSize,\n  iconSize,\n  spacing,\n} from \"../../../core/design-system/index.js\";\nimport { AccentFailIcon } from \"../../ui/ConnectWallet/icons/AccentFailIcon.js\";\nimport { QRCode } from \"../../ui/components/QRCode.js\";\nimport { Spacer } from \"../../ui/components/Spacer.js\";\nimport { WalletImage } from \"../../ui/components/WalletImage.js\";\nimport {\n  Container,\n  ModalHeader,\n  ScreenBottomContainer,\n} from \"../../ui/components/basic.js\";\nimport { Button } from \"../../ui/components/buttons.js\";\nimport { Text } from \"../../ui/components/text.js\";\n\n/**\n * @internal\n */\nexport const ScanScreen: React.FC<{\n  onBack?: () => void;\n  onGetStarted?: () => void;\n  qrCodeUri?: string;\n  walletName: string;\n  walletId: WalletId;\n  qrScanInstruction: string;\n  getStartedLink: string;\n  error: boolean;\n  onRetry: () => void;\n  connectModalSize: \"compact\" | \"wide\";\n  client: ThirdwebClient;\n}> = (props) => {\n  const { connectModalSize, client } = props;\n  const [linkCopied, setLinkCopied] = useState(false);\n\n  return (\n    <Container fullHeight flex=\"column\" animate=\"fadein\">\n      <Container p=\"lg\">\n        <ModalHeader onBack={props.onBack} title={props.walletName} />\n      </Container>\n\n      <Spacer y=\"sm\" />\n\n      <Container expand flex=\"column\" px=\"lg\" center=\"both\">\n        {!props.error && (\n          <div\n            style={{\n              textAlign: \"center\",\n            }}\n          >\n            <QRCode\n              qrCodeUri={props.qrCodeUri}\n              QRIcon={\n                <WalletImage\n                  size={iconSize.xxl}\n                  id={props.walletId}\n                  client={client}\n                />\n              }\n            />\n\n            <Spacer y=\"xs\" />\n\n            <Button\n              disabled={props.qrCodeUri === undefined}\n              variant=\"link\"\n              style={{\n                fontSize: \"12px\",\n                opacity: props.qrCodeUri === undefined ? 0.5 : 1,\n                cursor: props.qrCodeUri === undefined ? \"default\" : \"pointer\",\n              }}\n              onClick={() => {\n                navigator.clipboard\n                  .writeText(props.qrCodeUri as string) // should always be string since the button is disabled otherwise\n                  .then(() => {\n                    setLinkCopied(true);\n                    setTimeout(() => setLinkCopied(false), 3000); // reset the check icon after 3 seconds\n                  })\n                  .catch((err) => {\n                    console.error(\"Failed to copy link to clipboard\", err);\n                  });\n              }}\n            >\n              {linkCopied ? (\n                <CheckIcon width={14} height={14} />\n              ) : (\n                <CopyIcon width={14} height={14} />\n              )}\n              <span style={{ padding: \"0 4px\" }}>Copy Link</span>\n            </Button>\n\n            <Spacer y=\"lg\" />\n\n            <Text\n              center\n              multiline\n              balance\n              style={{\n                paddingInline: spacing.lg,\n              }}\n            >\n              {props.qrScanInstruction}\n            </Text>\n          </div>\n        )}\n\n        {props.error && (\n          <Container\n            animate=\"fadein\"\n            style={{\n              width: \"100%\",\n            }}\n          >\n            <Spacer y=\"xxl\" />\n            <Container flex=\"row\" center=\"x\">\n              <AccentFailIcon size={iconSize[\"3xl\"]} />\n            </Container>\n            <Spacer y=\"lg\" />\n            <Text center size=\"lg\" color=\"primaryText\">\n              Connection Failed\n            </Text>\n            <Spacer y=\"3xl\" />\n\n            <Button fullWidth variant=\"accent\" onClick={props.onRetry}>\n              Try again\n            </Button>\n          </Container>\n        )}\n      </Container>\n\n      <Spacer y=\"lg\" />\n\n      {props.onGetStarted && (\n        <ScreenBottomContainer\n          style={{\n            border: connectModalSize === \"compact\" ? undefined : \"none\",\n          }}\n        >\n          <Button\n            variant=\"link\"\n            onClick={props.onGetStarted}\n            style={{\n              fontSize: fontSize.sm,\n              textAlign: \"center\",\n            }}\n          >\n            {props.getStartedLink}\n          </Button>\n        </ScreenBottomContainer>\n      )}\n    </Container>\n  );\n};\n", "\"use client\";\nimport { keyframes } from \"@emotion/react\";\nimport { ExternalLinkIcon } from \"@radix-ui/react-icons\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport type { InjectedSupportedWalletIds } from \"../../../../../wallets/__generated__/wallet-ids.js\";\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\nimport type { WalletInfo } from \"../../../../../wallets/wallet-info.js\";\nimport { useCustomTheme } from \"../../../../core/design-system/CustomThemeProvider.js\";\nimport { iconSize, radius } from \"../../../../core/design-system/index.js\";\nimport type { InjectedWalletLocale } from \"../../../wallets/injected/locale/types.js\";\nimport { WalletImage } from \"../../components/WalletImage.js\";\nimport { Container, ModalHeader } from \"../../components/basic.js\";\nimport { ButtonLink } from \"../../components/buttons.js\";\nimport { StyledDiv } from \"../../design-system/elements.js\";\n\n/**\n * @internal\n */\nexport const DeepLinkConnectUI = (props: {\n  onGetStarted: () => void;\n  locale: InjectedWalletLocale;\n  wallet: Wallet<InjectedSupportedWalletIds>;\n  walletInfo: WalletInfo;\n  deepLinkPrefix: string;\n  onBack?: () => void;\n  client: ThirdwebClient;\n}) => {\n  return (\n    <Container animate=\"fadein\">\n      <Container p=\"lg\">\n        <ModalHeader onBack={props.onBack} title={props.walletInfo.name} />\n      </Container>\n\n      <Container flex=\"row\" center=\"x\" animate=\"fadein\" py=\"3xl\">\n        <PulsatingContainer>\n          <WalletImage id={props.wallet.id} client={props.client} size=\"80\" />\n        </PulsatingContainer>\n      </Container>\n\n      <Container p=\"lg\">\n        <ButtonLink\n          fullWidth\n          variant=\"accent\"\n          href={`${props.deepLinkPrefix}${window.location\n            .toString()\n            .replace(\"https://\", \"\")}`}\n          gap=\"xs\"\n        >\n          Continue in {props.walletInfo.name}\n          <ExternalLinkIcon width={iconSize.sm} height={iconSize.sm} />\n        </ButtonLink>\n      </Container>\n    </Container>\n  );\n};\n\nconst pulseAnimation = keyframes`\n0% {\n  transform: scale(0.9);\n}\n100% {\n  opacity: 0;\n  transform: scale(1.4);\n}\n`;\n\nconst PulsatingContainer = /* @__PURE__ */ StyledDiv((_) => {\n  const theme = useCustomTheme();\n  return {\n    position: \"relative\",\n    \"&::before\": {\n      content: '\"\"',\n      display: \"block\",\n      position: \"absolute\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0,\n      background: theme.colors.accentText,\n      animation: `${pulseAnimation} 2s cubic-bezier(0.175, 0.885, 0.32, 1.1) infinite`,\n      zIndex: -1,\n      borderRadius: radius.xl,\n    },\n  };\n});\n", "\"use client\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport type { Chain } from \"../../../../../chains/types.js\";\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\nimport type { InjectedSupportedWalletIds } from \"../../../../../wallets/__generated__/wallet-ids.js\";\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\nimport { wait } from \"../../../../core/utils/wait.js\";\nimport type { InjectedWalletLocale } from \"../../../wallets/injected/locale/types.js\";\nimport { ConnectingScreen } from \"../../../wallets/shared/ConnectingScreen.js\";\n\n/**\n * @internal\n */\nexport const InjectedConnectUI = (props: {\n  onGetStarted?: () => void;\n  locale: InjectedWalletLocale;\n  wallet: Wallet<InjectedSupportedWalletIds>;\n  walletName: string;\n  onBack?: () => void;\n  done: () => void;\n  client: ThirdwebClient;\n  chain: Chain | undefined;\n  size: \"compact\" | \"wide\";\n}) => {\n  const { wallet, done } = props;\n  const [errorConnecting, setErrorConnecting] = useState(false);\n  const locale = props.locale;\n\n  const connectToExtension = useCallback(async () => {\n    try {\n      connectPrompted.current = true;\n      setErrorConnecting(false);\n      await wait(1000);\n      await wallet.connect({\n        client: props.client,\n        chain: props.chain,\n      });\n\n      done();\n    } catch (e) {\n      setErrorConnecting(true);\n      console.error(e);\n    }\n  }, [props.client, props.chain, done, wallet]);\n\n  const connectPrompted = useRef(false);\n  useEffect(() => {\n    if (connectPrompted.current) {\n      return;\n    }\n\n    connectToExtension();\n  }, [connectToExtension]);\n\n  return (\n    <ConnectingScreen\n      locale={{\n        getStartedLink: locale.getStartedLink,\n        instruction: locale.connectionScreen.instruction,\n        tryAgain: locale.connectionScreen.retry,\n        inProgress: locale.connectionScreen.inProgress,\n        failed: locale.connectionScreen.failed,\n      }}\n      onBack={props.onBack}\n      walletName={props.walletName}\n      onGetStarted={props.onGetStarted}\n      walletId={props.wallet.id}\n      onRetry={() => {\n        connectToExtension();\n      }}\n      errorConnecting={errorConnecting}\n      client={props.client}\n      size={props.size}\n    />\n  );\n};\n", "/**\n * @internal\n */\nexport const wait = (ms: number) =>\n  new Promise((resolve) => setTimeout(resolve, ms));\n", "\"use client\";\nimport { spacing } from \"../../../../core/design-system/index.js\";\nimport { Container } from \"../../components/basic.js\";\nimport { Link } from \"../../components/text.js\";\nimport { Text } from \"../../components/text.js\";\nimport type { ConnectLocale } from \"../locale/types.js\";\n\n/**\n * @internal\n */\nexport function TOS(props: {\n  termsOfServiceUrl?: string;\n  privacyPolicyUrl?: string;\n  locale: ConnectLocale[\"agreement\"];\n  requireApproval?: boolean;\n  isApproved?: boolean;\n  onApprove?: () => void;\n}) {\n  const { termsOfServiceUrl, privacyPolicyUrl, locale, requireApproval } =\n    props;\n\n  if (!termsOfServiceUrl && !privacyPolicyUrl && !requireApproval) {\n    return null;\n  }\n\n  const bothGiven = termsOfServiceUrl && privacyPolicyUrl;\n\n  return (\n    <Container flex=\"row\" center=\"x\">\n      <Text\n        size=\"xs\"\n        multiline\n        balance\n        inline\n        center\n        style={{\n          maxWidth: \"250px\",\n        }}\n      >\n        {requireApproval && (\n          <input\n            style={{\n              transform: \"translateY(3px)\",\n              marginRight: spacing[\"3xs\"],\n            }}\n            type=\"checkbox\"\n            onChange={props.onApprove}\n            checked={props.isApproved}\n            disabled={!requireApproval}\n          />\n        )}\n        {locale.prefix}{\" \"}\n        {termsOfServiceUrl && (\n          <Link\n            inline\n            size=\"xs\"\n            href={termsOfServiceUrl}\n            target=\"_blank\"\n            style={{\n              whiteSpace: \"nowrap\",\n            }}\n          >\n            {\" \"}\n            {locale.termsOfService}{\" \"}\n          </Link>\n        )}\n        {bothGiven && `${locale.and} `}\n        {privacyPolicyUrl && (\n          <Link inline size=\"xs\" href={privacyPolicyUrl} target=\"_blank\">\n            {locale.privacyPolicy}\n          </Link>\n        )}\n        {!privacyPolicyUrl && !termsOfServiceUrl && (\n          <Text inline size=\"xs\">\n            Terms of Service and Privacy Policy\n          </Text>\n        )}\n      </Text>\n    </Container>\n  );\n}\n", "/**\n * @internal\n */\nexport const ThirdwebTextIcon = (props: { height: number }) => {\n  return (\n    <svg\n      width={(props.height * 74) / 11}\n      height={props.height}\n      viewBox=\"0 0 74 11\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      role=\"presentation\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M34.1489 0.373291C33.5297 0.373291 33.022 0.874761 33.022 1.51414C33.022 2.14097 33.5297 2.64244 34.1489 2.64244C34.7681 2.64244 35.2758 2.14097 35.2758 1.51414C35.2758 0.874761 34.7681 0.373291 34.1489 0.373291ZM35.1396 3.21913H33.1706V9.97644H35.1396V3.21913ZM21.6787 0.624035H23.5982V3.21914H25.0718V5.02444H23.5982V7.40642C23.5982 7.75745 23.8706 8.03326 24.205 8.03326H25.0594V9.95138H24.205C22.818 9.95138 21.6787 8.81054 21.6787 7.39389V5.0119H20.7871V3.20661H21.6787V0.624035ZM29.7652 3.0687C28.8736 3.0687 28.1677 3.44481 27.8953 4.03403V0.624035H25.9263V9.96392H27.8953V6.17782C27.8953 5.388 28.403 4.83639 29.1213 4.83639C29.8519 4.83639 30.2605 5.31278 30.2605 6.11514V9.97646H32.2295V5.8644C32.2295 4.10925 31.3379 3.0687 29.7652 3.0687ZM37.9507 3.2066V4.13432C38.2479 3.45734 38.9661 3.0687 39.8701 3.05616C40.0063 3.05616 40.1797 3.0687 40.3902 3.09377V4.97429C40.1921 4.93668 39.9692 4.9116 39.7339 4.9116C38.607 4.9116 37.9507 5.55098 37.9507 6.66675V9.96392H35.9817V3.2066H37.9507ZM45.9257 4.09672C45.7275 3.50749 44.9474 3.09378 43.9443 3.09378C43.0032 3.09378 42.2106 3.43227 41.5791 4.10926C40.9599 4.7737 40.6379 5.61367 40.6379 6.59154C40.6379 7.5694 40.9599 8.39683 41.5791 9.08635C42.2106 9.7508 43.0032 10.0893 43.9443 10.0893C44.9474 10.0893 45.7275 9.67558 45.9257 9.08635V9.97646H47.8946V0.624035H45.9257V4.09672ZM45.5294 7.79506C45.195 8.12102 44.7864 8.27146 44.3034 8.27146C43.8329 8.27146 43.4242 8.10848 43.1022 7.79506C42.7679 7.45657 42.6069 7.0554 42.6069 6.59154C42.6069 6.12767 42.7679 5.7265 43.1022 5.40054C43.4366 5.06205 43.8329 4.89907 44.3034 4.89907C44.7988 4.89907 45.2074 5.06205 45.5294 5.40054C45.8761 5.7265 46.0495 6.12767 46.0495 6.59154C46.0495 7.0554 45.8761 7.45657 45.5294 7.79506ZM53.5787 3.2442L55.3619 6.45361L56.5631 3.21913H58.4949L55.7458 10.3651L53.5787 6.47868L51.4115 10.3651L48.6748 3.21913H50.6066L51.7954 6.45361L53.5787 3.2442ZM61.7394 3.05616C60.7239 3.05616 59.8694 3.38212 59.2007 4.03403C58.5444 4.6734 58.2101 5.5259 58.2101 6.57899V6.64167C58.2101 7.69476 58.5444 8.54726 59.2007 9.18664C59.8818 9.81347 60.7487 10.1394 61.8384 10.1394C62.8539 10.1394 63.6836 9.93884 64.3151 9.52513V7.78252C63.6959 8.22131 62.9034 8.43443 61.9499 8.43443C60.9097 8.43443 60.2286 7.92042 60.1914 7.11807H65.0829C65.1077 6.91748 65.12 6.69182 65.12 6.46616C65.12 5.50083 64.7981 4.69848 64.1789 4.04657C63.5597 3.38212 62.73 3.05616 61.7394 3.05616ZM60.1914 5.82679C60.2038 5.51337 60.3648 5.25009 60.662 5.03697C60.9716 4.82385 61.3183 4.71101 61.7394 4.71101C62.5195 4.71101 63.1263 5.22502 63.1263 5.82679H60.1914ZM69.8135 3.09378C70.7546 3.09378 71.5472 3.43227 72.1663 4.10925C72.7979 4.78624 73.1199 5.60113 73.1199 6.579C73.1199 7.55686 72.7979 8.38429 72.1663 9.07381C71.5472 9.73826 70.7546 10.0768 69.8135 10.0768C68.8104 10.0768 68.0302 9.66304 67.8321 9.07381V9.96392H65.8631V0.624035H67.8321V4.09672C68.0302 3.50749 68.8104 3.09378 69.8135 3.09378ZM69.4543 8.27146C69.9249 8.27146 70.3212 8.12102 70.6555 7.79506C70.9899 7.45657 71.1509 7.05539 71.1509 6.59153C71.1509 6.12767 70.9899 5.7265 70.6555 5.40054C70.3336 5.06205 69.9249 4.89907 69.4543 4.89907C68.9714 4.89907 68.5627 5.06205 68.216 5.40054C67.8816 5.7265 67.7083 6.12767 67.7083 6.59153C67.7083 7.05539 67.8816 7.45657 68.216 7.79506C68.5503 8.10848 68.959 8.27146 69.4543 8.27146Z\"\n        fill=\"currentColor\"\n      />\n      <g clipPath=\"url(#clip0_5017_2727)\">\n        <path\n          fillRule=\"evenodd\"\n          clipRule=\"evenodd\"\n          d=\"M0.045011 0.900694C-0.126602 0.467742 0.193222 0 0.661257 0H3.56697C3.83999 0 4.08181 0.162357 4.18322 0.413623L6.49609 6.18115C6.55849 6.33578 6.55849 6.50973 6.49609 6.66822L5.04128 10.2903C4.81896 10.8431 4.03111 10.8431 3.80879 10.2903L0.045011 0.900694ZM5.65759 0.881366C5.50158 0.45228 5.8214 0 6.28164 0H8.81292C9.09374 0 9.34336 0.173954 9.43697 0.432951L11.5392 6.20048C11.5899 6.34351 11.5899 6.502 11.5392 6.6489L10.2755 10.1164C10.0649 10.6962 9.23805 10.6962 9.02744 10.1164L5.65759 0.881366ZM11.3404 0C10.8724 0 10.5525 0.467742 10.7241 0.900694L14.4879 10.2903C14.7102 10.8431 15.4981 10.8431 15.7204 10.2903L17.1752 6.66822C17.2376 6.50973 17.2376 6.33578 17.1752 6.18115L14.8623 0.413623C14.7609 0.162357 14.5191 0 14.2461 0H11.3404Z\"\n          fill=\"currentColor\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_5017_2727\">\n          <rect width=\"17.219\" height=\"10.7049\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n};\n", "import { Container } from \"../components/basic.js\";\nimport { Link } from \"../components/text.js\";\nimport { Text } from \"../components/text.js\";\nimport { ThirdwebTextIcon } from \"./icons/ThirdwebTextIcon.js\";\n\n/**\n * @internal\n */\nexport function PoweredByThirdweb() {\n  return (\n    <Link\n      color=\"secondaryText\"\n      hoverColor=\"primaryText\"\n      target=\"_blank\"\n      href=\"https://thirdweb.com/connect?utm_source=cw_text\"\n    >\n      <Container\n        flex=\"row\"\n        center=\"both\"\n        style={{\n          color: \"currentColor\",\n          gap: 4,\n        }}\n      >\n        <Text\n          size=\"sm\"\n          weight={600}\n          style={{\n            color: \"currentColor\",\n          }}\n        >\n          Powered by\n        </Text>\n        <ThirdwebTextIcon height={13} />\n      </Container>\n    </Link>\n  );\n}\n", "import type { Chain } from \"../../../chains/types.js\";\nimport {\n  COINBASE,\n  METAMASK,\n  RAINBOW,\n  ZERION,\n} from \"../../../wallets/constants.js\";\nimport { createWallet } from \"../../../wallets/create-wallet.js\";\nimport type { Wallet } from \"../../../wallets/interfaces/wallet.js\";\nimport type { AppMetadata } from \"../../../wallets/types.js\";\n\n/**\n * @internal\n */\nexport function getDefaultWallets(options?: {\n  appMetadata?: AppMetadata;\n  chains?: Chain[];\n}): Wallet[] {\n  return [\n    createWallet(\"inApp\"),\n    createWallet(METAMASK),\n    createWallet(COINBASE, {\n      appMetadata: options?.appMetadata,\n      chains: options?.chains,\n    }),\n    createWallet(RAINBOW),\n    createWallet(\"io.rabby\"),\n    createWallet(ZERION),\n  ];\n}\n"],
  "mappings": "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",
  "names": ["_a", "_jsx", "_jsxs", "import_react", "syncTimeouts", "cb", "t1", "t2", "t3", "usePrevious", "value", "ref", "PWM_BADGE_MARGIN_RIGHT", "PWM_BADGE_SPACE_WIDTH_PX", "PWM_BADGE_SPACE_WIDTH", "PASSWORD_MANAGERS_SELECTORS", "usePasswordManagerBadge", "containerRef", "inputRef", "pushPasswordManagerStrategy", "isFocused", "hasPWMBadge", "setHasPWMBadge", "hasPWMBadgeSpace", "setHasPWMBadgeSpace", "done", "setDone", "willPushPWMBadge", "trackPWMBadge", "container", "input", "elementToCompare", "rightCornerX", "centereredY", "x", "y", "checkHasSpace", "distanceToRightEdge", "interval", "_isFocused", "t4", "OTPInputContext", "OTPInput", "_a", "_b", "uncheckedValue", "uncheckedOnChange", "maxLength", "textAlign", "pattern", "placeholder", "inputMode", "onComplete", "pasteTransformer", "containerClassName", "noScriptCSSFallback", "NOSCRIPT_CSS_FALLBACK", "render", "children", "props", "__objRest", "_c", "_d", "_e", "internalValue", "setInternalValue", "previousValue", "onChange", "newValue", "regexp", "initialLoadRef", "inputMetadataRef", "onDocumentSelectionChange", "setMirrorSelectionStart", "setMirrorSelectionEnd", "_s", "_dir", "_ml", "_val", "_prev", "start", "end", "direction", "isSingleCaret", "isInsertMode", "c", "offset", "wasPreviouslyInserting", "s", "e", "dir", "setIsFocused", "styleEl", "autofillStyles", "safeInsertRule", "updateRootHeight", "resizeObserver", "isHoveringInput", "setIsHoveringInput", "mirrorSelectionStart", "mirrorSelectionEnd", "pwmb", "_changeListener", "_focusListener", "_pasteListener", "_content", "content", "_start", "_end", "rootStyle", "inputStyle", "renderedInput", "__spreadProps", "__spreadValues", "contextValue", "_", "slotIdx", "isActive", "char", "placeholderChar", "renderedChildren", "sheet", "rule", "_jsx", "_jsxs", "_a", "_jsxs", "_jsx", "_Fragment", "import_react", "_jsxs", "_jsx", "_jsxs", "_jsx", "_jsxs", "_jsx", "_jsxs", "_jsx", "_Fragment", "import_react", "_a", "_b", "_jsx", "_jsxs", "import_react", "import_react", "import_react", "import_react", "import_react", "_jsx", "_jsx", "_jsxs", "_jsxs", "_jsx", "import_react", "_jsxs", "_jsx", "_jsx", "_jsxs", "ButtonLink", "import_react", "import_react", "_jsxs", "_jsx", "_jsx", "_jsxs", "_jsx", "import_react", "wait", "wait", "_jsx", "_jsx", "_jsxs", "_jsx", "_jsxs", "_jsx", "_jsxs", "_jsxs", "_jsx", "_jsx", "_jsxs", "_jsx", "_jsxs", "_Fragment", "_jsx", "_jsxs", "_Fragment"]
}
